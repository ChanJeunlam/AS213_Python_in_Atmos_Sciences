
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cartopy 地图绘制（1） &#8212; AS213 Python in Atmospheric Sciences</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.e7340bb3dbd8dde6db86f25597f54a1b.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.7d483ff0a819d6edff12ce0b1ead3928.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cartopy 地图绘制（2）" href="Cartopy_2.html" />
    <link rel="prev" title="Xarray 数据处理（2）" href="../xarray/xarray-2.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/sysu_logo.gif" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">AS213 Python in Atmospheric Sciences</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   AS213: Python in Atmosphric Sciences
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Pandas
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/Pandas_1.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Pandas
    </span>
   </code>
   - 1
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/Pandas_2.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Pandas
    </span>
   </code>
   - 2
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/Pandas_3.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Pandas
    </span>
   </code>
   - 3
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/Pandas_homework.html">
   Pandas homework
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/%E6%80%9D%E8%80%83%E9%A2%98.html">
   思考题
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Pandas/%E6%80%9D%E8%80%83%E9%A2%98_%E7%AD%94%E6%A1%88.html">
   思考题答案
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Matplotlib
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Matplotlib/Matplotlib_advanced.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Matplotlib
    </span>
   </code>
   进阶
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Matplotlib/Matplotlib_homework.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Matplotlib
    </span>
   </code>
   作业
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  xarray
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../xarray/xarray-1.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Xarray
    </span>
   </code>
   数据处理（１）
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../xarray/xarray-2.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Xarray
    </span>
   </code>
   数据处理（2）
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Cartopy
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   <code class="docutils literal notranslate">
    <span class="pre">
     Cartopy
    </span>
   </code>
   地图绘制（1）
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Cartopy_2.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Cartopy
    </span>
   </code>
   地图绘制（2）
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Cartopy_3.html">
   <code class="docutils literal notranslate">
    <span class="pre">
     Cartopy
    </span>
   </code>
   地图绘制（3）
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Exercises/Exercise_El_Nino.html">
   xarray/cartopy 作业
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Intergrated examples
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../Integrated_examples/integrated_examples_1.html">
   地图数据处理及可视化
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../Integrated_examples/integrated_examples_2.html">
   大气数据处理及可视化
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/cartopy/Cartopy_1.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/smartlixx/AS213_Python_in_Atmos_Sciences"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/smartlixx/AS213_Python_in_Atmos_Sciences/issues/new?title=Issue%20on%20page%20%2Fcartopy/Cartopy_1.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>


            <!-- Full screen (wrap in <a> to have style consistency -->
            <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                    data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                    title="Fullscreen mode"><i
                        class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/smartlixx/AS213_Python_in_Atmos_Sciences/master?urlpath=tree/cartopy/Cartopy_1.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i>
            Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#projection">
   投影 Projection
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id1">
   添加经纬度标签
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-feature-interface">
   地图特性 The Feature Interface
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#transforming-data">
   转换参考系 Transforming data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id2">
     例子：珠海到伦敦
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#raster">
   绘制二维 (Raster) 数据
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#xarray">
   与
   <code class="docutils literal notranslate">
    <span class="pre">
     xarray
    </span>
   </code>
   结合绘图
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id3">
     另一种（更好的）解决方案
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id4">
   展示卫星图像
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id5">
     风云卫星图像
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#shapefile">
   Shapefile
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id6">
     例子: 单独显示某个国家
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#id7">
     例子：显示多个国家和地区
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id8">
   中国地图
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#lambertconformal">
     LambertConformal 坐标标注
    </a>
   </li>
  </ul>
 </li>
</ul>

        </nav>
        
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="cartopy-1">
<h1><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 地图绘制（1）<a class="headerlink" href="#cartopy-1" title="Permalink to this headline">¶</a></h1>
<p><img alt="" src="https://scitools.org.uk/cartopy/docs/latest/_static/cartopy.png" /></p>
<p><strong>Carto</strong>graphy <strong>Py</strong>thon</p>
<hr class="docutils" />
<p>主讲人：李显祥</p>
<p>大气科学学院</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>
<span class="kn">import</span> <span class="nn">cartopy.feature</span> <span class="k">as</span> <span class="nn">cfeat</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cartopy</span>

<span class="nb">print</span><span class="p">(</span><span class="n">cartopy</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0.18.0
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">cartopy</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>dict_values([&#39;&#39;, &#39;/Users/lixx/.local/share/cartopy&#39;, &#39;/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/cartopy/data&#39;, {(&#39;shapefiles&#39;, &#39;natural_earth&#39;): &lt;cartopy.io.shapereader.NEShpDownloader object at 0x7f9926a746d0&gt;, (&#39;shapefiles&#39;, &#39;gshhs&#39;): &lt;cartopy.io.shapereader.GSHHSShpDownloader object at 0x7f9926a7cb90&gt;}])
</pre></div>
</div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 用于基于地图的数据可视化。它依赖于以下包：</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">proj4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">shapely</span></code></p></li>
</ul>
<p>它取代 <code class="docutils literal notranslate"><span class="pre">Basemap</span></code>，但是还没有完全实现 <code class="docutils literal notranslate"><span class="pre">Basemap</span></code> 的所有功能。</p>
<div class="section" id="projection">
<h2>投影 Projection<a class="headerlink" href="#projection" title="Permalink to this headline">¶</a></h2>
<table width='100%'><tr><td width='50%'><img src='China_map_mercator.png' width='400' algin='right'/></td><td width='50%'><img src='China_map_Lambert.png' width='400' align='left'/></td></tr></table><ul class="simple">
<li><p>为了将地球（或者地球的一部分）画到平面上（纸上或者屏幕上），我们需要投影（Projections）。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 通过 <code class="docutils literal notranslate"><span class="pre">crs</span></code> 子模块提供了很多不同的投影法。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 依赖于 <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>, 每一种投影方法会创建 <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> <code class="docutils literal notranslate"><span class="pre">Axes</span></code>（或者 <code class="docutils literal notranslate"><span class="pre">AxesSubplot</span></code>）用来绘制数据。</p></li>
<li><p>投影创建的 <code class="docutils literal notranslate"><span class="pre">Axes</span></code> 是一个 <code class="docutils literal notranslate"><span class="pre">cartopy.mpl.geoaxes.GeoAxes</span></code> 对象。 这个 <code class="docutils literal notranslate"><span class="pre">Axes</span></code> 子类重载（override）了 <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> 的一些方法，并添加了一些非常有用的方法，尤其是用来绘制地图的方法。</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">16</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Projections&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>

<span class="n">projections</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;PlateCarree&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="s1">&#39;AlbersEqualArea&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">AlbersEqualArea</span><span class="p">(),</span> 
               <span class="s1">&#39;AzimuthalEquidistant&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">AzimuthalEquidistant</span><span class="p">(),</span> <span class="s1">&#39;EquidistantConic&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EquidistantConic</span><span class="p">(),</span> 
               <span class="s1">&#39;LambertConformal&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(),</span> <span class="s1">&#39;LambertCylindrical&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">LambertCylindrical</span><span class="p">(),</span> 
               <span class="s1">&#39;Mercator&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Mercator</span><span class="p">(),</span> <span class="s1">&#39;Miller&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Miller</span><span class="p">(),</span> <span class="s1">&#39;Mollweide&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Mollweide</span><span class="p">(),</span> 
               <span class="s1">&#39;Orthographic&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Orthographic</span><span class="p">(),</span> <span class="s1">&#39;Robinson&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Robinson</span><span class="p">(),</span> <span class="s1">&#39;Sinusoidal&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Sinusoidal</span><span class="p">(),</span> 
               <span class="s1">&#39;Stereographic&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Stereographic</span><span class="p">(),</span> <span class="s1">&#39;TransverseMercator&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">TransverseMercator</span><span class="p">(),</span> 
               <span class="s1">&#39;InterruptedGoodeHomolosine&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">InterruptedGoodeHomolosine</span><span class="p">(),</span>
               <span class="s1">&#39;RotatedPole&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">RotatedPole</span><span class="p">(),</span> <span class="s1">&#39;OSGB&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">OSGB</span><span class="p">(),</span> <span class="s1">&#39;EuroPP&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EuroPP</span><span class="p">(),</span> 
               <span class="s1">&#39;Geostationary&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Geostationary</span><span class="p">(),</span> <span class="s1">&#39;NearsidePerspective&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">NearsidePerspective</span><span class="p">(),</span> 
               <span class="s1">&#39;EckertI&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertI</span><span class="p">(),</span> <span class="s1">&#39;EckertII&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertII</span><span class="p">(),</span> <span class="s1">&#39;EckertIII&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertIII</span><span class="p">(),</span> 
               <span class="s1">&#39;EckertIV&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertIV</span><span class="p">(),</span> <span class="s1">&#39;EckertV&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertV</span><span class="p">(),</span> <span class="s1">&#39;EckertVI&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EckertVI</span><span class="p">(),</span> 
               <span class="s1">&#39;EqualEarth&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EqualEarth</span><span class="p">(),</span> <span class="s1">&#39;Gnomonic&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Gnomonic</span><span class="p">(),</span>
               <span class="s1">&#39;LambertAzimuthalEqualArea&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">LambertAzimuthalEqualArea</span><span class="p">(),</span> 
               <span class="s1">&#39;NorthPolarStereo&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">NorthPolarStereo</span><span class="p">(),</span> <span class="s1">&#39;OSNI&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">OSNI</span><span class="p">(),</span> 
               <span class="s1">&#39;SouthPolarStereo&#39;</span><span class="p">:</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">SouthPolarStereo</span><span class="p">()}</span> <span class="c1">#, &#39;Geodetic&#39;: ccrs.Geodetic()}</span>

<span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">projection</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">projections</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="n">index</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>  
    <span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">projection</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/ipykernel_launcher.py:9: UserWarning: The default value for the *approx* keyword argument to TransverseMercator will change from True to False after 0.18.
  if __name__ == &#39;__main__&#39;:
/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/ipykernel_launcher.py:11: UserWarning: The default value for the *approx* keyword argument to OSGB will change from True to False after 0.18.
  # This is added back by InteractiveShellApp.init_path()
/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/ipykernel_launcher.py:17: UserWarning: The default value for the *approx* keyword argument to OSNI will change from True to False after 0.18.
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/cartopy/mpl/feature_artist.py:154: UserWarning: Unable to determine extent. Defaulting to global.
  warnings.warn(&#39;Unable to determine extent. Defaulting to global.&#39;)
</pre></div>
</div>
<img alt="../_images/Cartopy_1_8_2.png" src="../_images/Cartopy_1_8_2.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make sure the figure is a decent size when plotted.</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;PlateCarree&#39;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Sinusoidal</span><span class="p">())</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Sinusoidal&#39;</span><span class="p">)</span>

<span class="n">ax1</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">NorthPolarStereo</span><span class="p">())</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax1</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;NorthPolarStereo&#39;</span><span class="p">)</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geostationary</span><span class="p">())</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Geostationary&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0.5, 1.0, &#39;Geostationary&#39;)
</pre></div>
</div>
<img alt="../_images/Cartopy_1_9_1.png" src="../_images/Cartopy_1_9_1.png" />
</div>
</div>
<ul class="simple">
<li><p>三维的地球无法完美地投影到平面上。</p></li>
<li><p>某些实际地理特性无法保持：</p>
<ul>
<li><p>Area</p></li>
<li><p>Shape</p></li>
<li><p>Direction</p></li>
<li><p>Distance</p></li>
<li><p>Scale</p></li>
</ul>
</li>
</ul>
<blockquote>
<div><p>All models (map projections) are wrong, but some are useful. - Phileas Elson (SciPy 2018)</p>
</div></blockquote>
</div>
<div class="section" id="id1">
<h2>添加经纬度标签<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartopy.mpl.gridliner</span> <span class="kn">import</span> <span class="n">LONGITUDE_FORMATTER</span><span class="p">,</span> <span class="n">LATITUDE_FORMATTER</span>

<span class="c1"># latitude and longitude with east and west, etc.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">grid_lines</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">xformatter</span> <span class="o">=</span> <span class="n">LONGITUDE_FORMATTER</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">yformatter</span> <span class="o">=</span> <span class="n">LATITUDE_FORMATTER</span>
<span class="n">m</span><span class="o">.</span><span class="n">coastlines</span><span class="p">(</span><span class="s1">&#39;110m&#39;</span><span class="p">)</span> <span class="c1"># 50m, 10m</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f9928e9d590&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_12_1.png" src="../_images/Cartopy_1_12_1.png" />
</div>
</div>
<p>我们可以改变地图的中心点，还可以用 <code class="docutils literal notranslate"><span class="pre">stock_img</span></code> 来叠加一个默认的背景图, 用 <code class="docutils literal notranslate"><span class="pre">nightshade</span></code> 来区分夜晚/白天</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>
<span class="kn">import</span> <span class="nn">matplotlib.ticker</span> <span class="k">as</span> <span class="nn">mticker</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">from</span> <span class="nn">cartopy.feature.nightshade</span> <span class="kn">import</span> <span class="n">Nightshade</span>

<span class="n">date</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">180</span><span class="p">))</span>
<span class="n">grid_lines</span> <span class="o">=</span> <span class="n">m</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c1">#grid_lines.xlabels_top = False     # v0.18 改变</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1">#grid_lines.ylabels_right = False   # v0.18 改变</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="c1">#grid_lines.xlocator = mticker.FixedLocator([0,60,120,180,-180,-120,-60])</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">xformatter</span> <span class="o">=</span> <span class="n">LongitudeFormatter</span><span class="p">(</span><span class="n">zero_direction_label</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">yformatter</span> <span class="o">=</span> <span class="n">LatitudeFormatter</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">stock_img</span><span class="p">()</span>
<span class="n">m</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">Nightshade</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.2</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f9928ebc750&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_14_1.png" src="../_images/Cartopy_1_14_1.png" />
</div>
</div>
</div>
<div class="section" id="the-feature-interface">
<h2>地图特性 The Feature Interface<a class="headerlink" href="#the-feature-interface" title="Permalink to this headline">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 可以通过地图特性来添加海岸线、海洋、陆地、河流等信息。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add coastlines to the map.</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">)</span>  <span class="c1"># Equivalent to `ax.coastlines()`</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f9928ae6290&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_16_1.png" src="../_images/Cartopy_1_16_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add land and ocean features, that come with preset face colours.</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">LAND</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f9928a8ebd0&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_17_1.png" src="../_images/Cartopy_1_17_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Add country borders.</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">LAND</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f9928db13d0&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_18_1.png" src="../_images/Cartopy_1_18_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># And finally, add lakes and rivers.</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="k">for</span> <span class="n">i_subplot</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">121</span><span class="p">,</span> <span class="mi">122</span><span class="p">):</span>
    <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="n">i_subplot</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">LAND</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">LAKES</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">RIVERS</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">i_subplot</span> <span class="o">==</span> <span class="mi">122</span><span class="p">:</span>
        <span class="c1">#ax.set_extent((-175, -90, 40, 70))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">((</span><span class="mi">70</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">50</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_19_0.png" src="../_images/Cartopy_1_19_0.png" />
</div>
</div>
</div>
<div class="section" id="transforming-data">
<h2>转换参考系 Transforming data<a class="headerlink" href="#transforming-data" title="Permalink to this headline">¶</a></h2>
<p>为了绘制地理数据，我们必须在标准的 <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> 绘图函数中指定<code class="docutils literal notranslate"><span class="pre">transform</span></code> 参数，来告诉绘图程序所绘制数据的投影方法. 所以
<code class="docutils literal notranslate"><span class="pre">transform</span></code> 的值应该是<em><strong>所绘制数据的原始投影方法</strong></em>。</p>
<p>首先我们在 <code class="docutils literal notranslate"><span class="pre">PlateCarree</span></code> 投影里绘制一条线.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">x0</span><span class="p">,</span> <span class="n">y0</span> <span class="o">=</span> <span class="o">-</span><span class="mi">50</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span> <span class="c1">#104, 1.3</span>
<span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">55</span> <span class="c1">#113, 22</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">],</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7f9928df3a90&gt;]
</pre></div>
</div>
<img alt="../_images/Cartopy_1_22_1.png" src="../_images/Cartopy_1_22_1.png" />
</div>
</div>
<p>然后在 <code class="docutils literal notranslate"><span class="pre">EquidistantConic</span></code> 投影里绘制同一条线。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">EquidistantConic</span><span class="p">()</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">],</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7f99291a4d50&gt;]
</pre></div>
</div>
<img alt="../_images/Cartopy_1_24_1.png" src="../_images/Cartopy_1_24_1.png" />
</div>
</div>
<p>这条线 <strong>并不是</strong> 我们所要的。
我们设置坐标系使用 <code class="docutils literal notranslate"><span class="pre">Equidistant</span> <span class="pre">Conic</span></code> 投影, 但是并没有告诉 <code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 数据所用的是 <strong><code class="docutils literal notranslate"><span class="pre">PlateCarree</span></code> 投影</strong>.
为此, 我们传递 <code class="docutils literal notranslate"><span class="pre">transform</span></code> 关键词给 <code class="docutils literal notranslate"><span class="pre">plt.plot</span></code> 函数:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">],</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7f992931a310&gt;]
</pre></div>
</div>
<img alt="../_images/Cartopy_1_26_1.png" src="../_images/Cartopy_1_26_1.png" />
</div>
</div>
<p>注意到绘制的线是弯曲的：它 <em><strong>在定义它的坐标系里</strong></em> 是直的, 而在不同的坐标系（投影）里面变成了曲线。</p>
<p>同时要注意, 除非我们调用 <code class="docutils literal notranslate"><span class="pre">set_extent</span></code> 来设定地图的范围, 否则默认地图只显示我们绘制数据的地方。</p>
<p>我们可以用 <code class="docutils literal notranslate"><span class="pre">set_global</span></code> 方法来绘制全球地图，这样我们就可以看到这条线是从哪里到哪里了：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="n">x0</span><span class="p">,</span> <span class="n">x1</span><span class="p">],</span> <span class="p">[</span><span class="n">y0</span><span class="p">,</span> <span class="n">y1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x7f9929333c10&gt;]
</pre></div>
</div>
<img alt="../_images/Cartopy_1_28_1.png" src="../_images/Cartopy_1_28_1.png" />
</div>
</div>
<div class="section" id="id2">
<h3>例子：珠海到伦敦<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create some test data</span>
<span class="n">zhuhai</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="mi">113</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
<span class="n">london</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">lons</span> <span class="o">=</span> <span class="p">[</span><span class="n">zhuhai</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">],</span> <span class="n">london</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]]</span>
<span class="n">lats</span> <span class="o">=</span> <span class="p">[</span><span class="n">zhuhai</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">],</span> <span class="n">london</span><span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">]]</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Equirectangular straight line&#39;</span><span class="p">)</span> <span class="c1">#, transform=ccrs.PlateCarree())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Great Circle&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geodetic</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_30_0.png" src="../_images/Cartopy_1_30_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Orthographic</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">50</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Equirectangular straight line&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">lons</span><span class="p">,</span> <span class="n">lats</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Great Circle&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geodetic</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_31_0.png" src="../_images/Cartopy_1_31_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="raster">
<h2>绘制二维 (Raster) 数据<a class="headerlink" href="#raster" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="n">lon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">80</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">lat</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
<span class="n">lon2d</span><span class="p">,</span> <span class="n">lat2d</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat2d</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lon2d</span><span class="p">)</span> <span class="o">*</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">lon2d</span><span class="p">,</span> <span class="n">lat2d</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.contour.QuadContourSet at 0x7f990f0e9350&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_33_1.png" src="../_images/Cartopy_1_33_1.png" />
</div>
</div>
<p>现在我们创建一个 <code class="docutils literal notranslate"><span class="pre">PlateCarree</span></code> 投影的图， 不使用 <code class="docutils literal notranslate"><span class="pre">transform</span></code> 关键词来绘制数据. 它凑巧可以工作，因为 <code class="docutils literal notranslate"><span class="pre">PlateCarree</span></code> 是lat / lon 数据的最简单投影方法.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.contour.GeoContourSet at 0x7f990f104250&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_35_1.png" src="../_images/Cartopy_1_35_1.png" />
</div>
</div>
<p>但是，当我们在另一个不同的投影方法下做同样的事情，我们可能得到错误的结果：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#projection = ccrs.RotatedPole(pole_longitude=-177.5, pole_latitude=37.5)</span>
<span class="n">projection</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Orthographic</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.contour.GeoContourSet at 0x7f990f112550&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_37_1.png" src="../_images/Cartopy_1_37_1.png" />
</div>
</div>
<p>要改正它，我们需要给 <code class="docutils literal notranslate"><span class="pre">contourf</span></code> 传递正确的 <code class="docutils literal notranslate"><span class="pre">transform</span></code> 参数：</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#projection = ccrs.RotatedPole(pole_longitude=-177.5, pole_latitude=37.5)</span>
<span class="n">projection</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Orthographic</span><span class="p">()</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">projection</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.contour.GeoContourSet at 0x7f990f10d190&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_39_1.png" src="../_images/Cartopy_1_39_1.png" />
</div>
</div>
</div>
<div class="section" id="xarray">
<h2>与 <code class="docutils literal notranslate"><span class="pre">xarray</span></code>结合绘图<a class="headerlink" href="#xarray" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">from</span> <span class="nn">cartopy</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>


<span class="c1"># get the path of the file. It can be found in the repo data directory.</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;repo_data_dir&quot;</span><span class="p">],</span>
                     <span class="s1">&#39;netcdf&#39;</span><span class="p">,</span> <span class="s1">&#39;HadISST1_SST_update.nc&#39;</span><span class="p">)</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="c1">#from netCDF4 import Dataset as netcdf_dataset</span>
<span class="c1">#dataset = netcdf_dataset(fname) </span>
<span class="c1">#sst = dataset.variables[&#39;sst&#39;][0, :, :]</span>
<span class="c1">#lats = dataset.variables[&#39;lat&#39;][:]</span>
<span class="c1">#lons = dataset.variables[&#39;lon&#39;][:]</span>

<span class="c1">#ax = plt.axes(projection=ccrs.PlateCarree())</span>

<span class="c1">#plt.contourf(lons, lats, sst, 60,</span>
<span class="c1">#             transform=ccrs.PlateCarree())</span>

<span class="c1">#ax.coastlines()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/miniconda3/envs/jupyter-book/lib/python3.7/site-packages/xarray/coding/times.py:113: SerializationWarning: Ambiguous reference date string: 1-1-1 00:00:0.0. The first value is assumed to be the year hence will be padded with zeros to remove the ambiguity (the padded reference date string is: 0001-1-1 00:00:0.0). To remove this message, remove the ambiguity by padding your reference date strings with zeros.
  warnings.warn(warning_msg, SerializationWarning)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sst</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sst</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>  <span class="c1"># 非常关键的语句</span>
<span class="n">sst</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">contourf</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">vmin</span><span class="o">=-</span><span class="mi">10</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mi">35</span><span class="p">,</span><span class="n">levels</span><span class="o">=</span><span class="mi">46</span><span class="p">,</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;RdBu_r&#39;</span><span class="p">,</span>
                  <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span><span class="n">cbar_kwargs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;shrink&#39;</span><span class="p">:</span> <span class="mf">0.7</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7f990f058510&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_42_1.png" src="../_images/Cartopy_1_42_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># add_cyclic example</span>
<span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="s2">&quot;example.nc&quot;</span><span class="p">)</span>
<span class="n">ds</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.QuadMesh at 0x7f990e132210&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_43_1.png" src="../_images/Cartopy_1_43_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (lat: 64, lon: 128)
Coordinates:
  * lon      (lon) float64 0.0 2.812 5.625 8.438 ... 348.8 351.6 354.4 357.2
  * lat      (lat) float64 -87.86 -85.1 -82.31 -79.53 ... 79.53 82.31 85.1 87.86
Data variables:
    depth    (lat, lon) float64 nan nan nan nan nan nan ... nan nan nan nan nan</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-936d934e-ed97-47e7-b383-b832c5aaaf42' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-936d934e-ed97-47e7-b383-b832c5aaaf42' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 64</li><li><span class='xr-has-index'>lon</span>: 128</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-4066a46a-74b3-4cdb-913e-f5558e647012' class='xr-section-summary-in' type='checkbox'  checked><label for='section-4066a46a-74b3-4cdb-913e-f5558e647012' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 2.812 5.625 ... 354.4 357.2</div><input id='attrs-f5e2ccaa-da8b-481d-a17c-dc2a231e0aea' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f5e2ccaa-da8b-481d-a17c-dc2a231e0aea' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-234d2be7-faff-4580-85db-fcf1eb24736e' class='xr-var-data-in' type='checkbox'><label for='data-234d2be7-faff-4580-85db-fcf1eb24736e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>long_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>axis :</span></dt><dd>X</dd></dl></div><div class='xr-var-data'><pre>array([  0.    ,   2.8125,   5.625 ,   8.4375,  11.25  ,  14.0625,  16.875 ,
        19.6875,  22.5   ,  25.3125,  28.125 ,  30.9375,  33.75  ,  36.5625,
        39.375 ,  42.1875,  45.    ,  47.8125,  50.625 ,  53.4375,  56.25  ,
        59.0625,  61.875 ,  64.6875,  67.5   ,  70.3125,  73.125 ,  75.9375,
        78.75  ,  81.5625,  84.375 ,  87.1875,  90.    ,  92.8125,  95.625 ,
        98.4375, 101.25  , 104.0625, 106.875 , 109.6875, 112.5   , 115.3125,
       118.125 , 120.9375, 123.75  , 126.5625, 129.375 , 132.1875, 135.    ,
       137.8125, 140.625 , 143.4375, 146.25  , 149.0625, 151.875 , 154.6875,
       157.5   , 160.3125, 163.125 , 165.9375, 168.75  , 171.5625, 174.375 ,
       177.1875, 180.    , 182.8125, 185.625 , 188.4375, 191.25  , 194.0625,
       196.875 , 199.6875, 202.5   , 205.3125, 208.125 , 210.9375, 213.75  ,
       216.5625, 219.375 , 222.1875, 225.    , 227.8125, 230.625 , 233.4375,
       236.25  , 239.0625, 241.875 , 244.6875, 247.5   , 250.3125, 253.125 ,
       255.9375, 258.75  , 261.5625, 264.375 , 267.1875, 270.    , 272.8125,
       275.625 , 278.4375, 281.25  , 284.0625, 286.875 , 289.6875, 292.5   ,
       295.3125, 298.125 , 300.9375, 303.75  , 306.5625, 309.375 , 312.1875,
       315.    , 317.8125, 320.625 , 323.4375, 326.25  , 329.0625, 331.875 ,
       334.6875, 337.5   , 340.3125, 343.125 , 345.9375, 348.75  , 351.5625,
       354.375 , 357.1875])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-87.86 -85.1 -82.31 ... 85.1 87.86</div><input id='attrs-77ae042a-397e-44d5-994b-457489f9c2fe' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-77ae042a-397e-44d5-994b-457489f9c2fe' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-9e1813f6-51c2-4bfa-b461-68d0aeaa70b7' class='xr-var-data-in' type='checkbox'><label for='data-9e1813f6-51c2-4bfa-b461-68d0aeaa70b7' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([-87.863614, -85.096348, -82.31274 , -79.525439, -76.736738, -73.947359,
       -71.157602, -68.367612, -65.577469, -62.78722 , -59.996894, -57.206511,
       -54.416085, -51.625625, -48.835138, -46.04463 , -43.254104, -40.463563,
       -37.67301 , -34.882447, -32.091876, -29.301298, -26.510713, -23.720124,
       -20.92953 , -18.138933, -15.348332, -12.55773 ,  -9.767125,  -6.976519,
        -4.185912,  -1.395304,   1.395304,   4.185912,   6.976519,   9.767125,
        12.55773 ,  15.348332,  18.138933,  20.92953 ,  23.720124,  26.510713,
        29.301298,  32.091876,  34.882447,  37.67301 ,  40.463563,  43.254104,
        46.04463 ,  48.835138,  51.625625,  54.416085,  57.206511,  59.996894,
        62.78722 ,  65.577469,  68.367612,  71.157602,  73.947359,  76.736738,
        79.525439,  82.31274 ,  85.096348,  87.863614])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-0777809a-f491-4dd1-b9d9-1583ebf46053' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0777809a-f491-4dd1-b9d9-1583ebf46053' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>depth</span></div><div class='xr-var-dims'>(lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-c15dc99b-16be-4b64-b09f-3169ced6f6ad' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-c15dc99b-16be-4b64-b09f-3169ced6f6ad' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-60aa4516-0f05-40d1-b9ed-c307ffcebff1' class='xr-var-data-in' type='checkbox'><label for='data-60aa4516-0f05-40d1-b9ed-c307ffcebff1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       ...,
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-a464ca92-da44-4d2c-bf66-7a077e20645d' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-a464ca92-da44-4d2c-bf66-7a077e20645d' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartopy.mpl.ticker</span> <span class="kn">import</span> <span class="n">LongitudeFormatter</span><span class="p">,</span> <span class="n">LatitudeFormatter</span>

<span class="n">proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">()</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>

<span class="n">pc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">depth</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_45_0.png" src="../_images/Cartopy_1_45_0.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cartopy.util</span> <span class="kn">import</span> <span class="n">add_cyclic_point</span>

<span class="n">data</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="s1">&#39;depth&#39;</span><span class="p">]</span>
<span class="n">lon</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;lon&#39;</span><span class="p">]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Original shape -&quot;</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">lon_idx</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">dims</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="s1">&#39;lon&#39;</span><span class="p">)</span>
<span class="n">wrap_data</span><span class="p">,</span> <span class="n">wrap_lon</span> <span class="o">=</span> <span class="n">add_cyclic_point</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">values</span><span class="p">,</span> <span class="n">coord</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">lon_idx</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;New shape -&quot;</span><span class="p">,</span> <span class="n">wrap_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Original shape - (64, 128)
New shape - (64, 129)
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>

<span class="n">pc</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">wrap_lon</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">lat</span><span class="p">,</span> <span class="n">wrap_data</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="n">cb</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">pc</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="n">cb</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_47_0.png" src="../_images/Cartopy_1_47_0.png" />
</div>
</div>
<div class="section" id="id3">
<h3>另一种（更好的）解决方案<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>之前我们学过：<code class="docutils literal notranslate"><span class="pre">xarray.dataset.assign_coords</span></code> 可以用来改变坐标值。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_new</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">({</span><span class="s1">&#39;lon&#39;</span><span class="p">:(((</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">+</span><span class="mi">180</span><span class="p">)</span><span class="o">%</span><span class="k">360</span>)-180)})
<span class="c1"># 或者</span>
<span class="c1"># ds_new = ds.assign_coords(lon = (((ds.lon+180)%360)-180))</span>
<span class="n">ds_new</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (lat: 64, lon: 128)
Coordinates:
  * lon      (lon) float64 0.0 2.812 5.625 8.438 ... -11.25 -8.438 -5.625 -2.812
  * lat      (lat) float64 -87.86 -85.1 -82.31 -79.53 ... 79.53 82.31 85.1 87.86
Data variables:
    depth    (lat, lon) float64 nan nan nan nan nan nan ... nan nan nan nan nan</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-981103a6-dcde-4bdd-afee-9e688af78a64' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-981103a6-dcde-4bdd-afee-9e688af78a64' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 64</li><li><span class='xr-has-index'>lon</span>: 128</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-e98ceabe-4f17-4341-a6d2-50e63b0e6c18' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e98ceabe-4f17-4341-a6d2-50e63b0e6c18' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 2.812 5.625 ... -5.625 -2.812</div><input id='attrs-1f338e64-1587-4ff0-b67a-5d1847cbf90b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1f338e64-1587-4ff0-b67a-5d1847cbf90b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4761ee0f-2ac8-4b3c-a313-548d83955e8a' class='xr-var-data-in' type='checkbox'><label for='data-4761ee0f-2ac8-4b3c-a313-548d83955e8a' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([   0.    ,    2.8125,    5.625 ,    8.4375,   11.25  ,   14.0625,
         16.875 ,   19.6875,   22.5   ,   25.3125,   28.125 ,   30.9375,
         33.75  ,   36.5625,   39.375 ,   42.1875,   45.    ,   47.8125,
         50.625 ,   53.4375,   56.25  ,   59.0625,   61.875 ,   64.6875,
         67.5   ,   70.3125,   73.125 ,   75.9375,   78.75  ,   81.5625,
         84.375 ,   87.1875,   90.    ,   92.8125,   95.625 ,   98.4375,
        101.25  ,  104.0625,  106.875 ,  109.6875,  112.5   ,  115.3125,
        118.125 ,  120.9375,  123.75  ,  126.5625,  129.375 ,  132.1875,
        135.    ,  137.8125,  140.625 ,  143.4375,  146.25  ,  149.0625,
        151.875 ,  154.6875,  157.5   ,  160.3125,  163.125 ,  165.9375,
        168.75  ,  171.5625,  174.375 ,  177.1875, -180.    , -177.1875,
       -174.375 , -171.5625, -168.75  , -165.9375, -163.125 , -160.3125,
       -157.5   , -154.6875, -151.875 , -149.0625, -146.25  , -143.4375,
       -140.625 , -137.8125, -135.    , -132.1875, -129.375 , -126.5625,
       -123.75  , -120.9375, -118.125 , -115.3125, -112.5   , -109.6875,
       -106.875 , -104.0625, -101.25  ,  -98.4375,  -95.625 ,  -92.8125,
        -90.    ,  -87.1875,  -84.375 ,  -81.5625,  -78.75  ,  -75.9375,
        -73.125 ,  -70.3125,  -67.5   ,  -64.6875,  -61.875 ,  -59.0625,
        -56.25  ,  -53.4375,  -50.625 ,  -47.8125,  -45.    ,  -42.1875,
        -39.375 ,  -36.5625,  -33.75  ,  -30.9375,  -28.125 ,  -25.3125,
        -22.5   ,  -19.6875,  -16.875 ,  -14.0625,  -11.25  ,   -8.4375,
         -5.625 ,   -2.8125])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-87.86 -85.1 -82.31 ... 85.1 87.86</div><input id='attrs-b17d4653-8921-4a71-a0ed-77ca09fa18ba' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b17d4653-8921-4a71-a0ed-77ca09fa18ba' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-31934050-258d-4e4e-9750-d896e65d65a4' class='xr-var-data-in' type='checkbox'><label for='data-31934050-258d-4e4e-9750-d896e65d65a4' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([-87.863614, -85.096348, -82.31274 , -79.525439, -76.736738, -73.947359,
       -71.157602, -68.367612, -65.577469, -62.78722 , -59.996894, -57.206511,
       -54.416085, -51.625625, -48.835138, -46.04463 , -43.254104, -40.463563,
       -37.67301 , -34.882447, -32.091876, -29.301298, -26.510713, -23.720124,
       -20.92953 , -18.138933, -15.348332, -12.55773 ,  -9.767125,  -6.976519,
        -4.185912,  -1.395304,   1.395304,   4.185912,   6.976519,   9.767125,
        12.55773 ,  15.348332,  18.138933,  20.92953 ,  23.720124,  26.510713,
        29.301298,  32.091876,  34.882447,  37.67301 ,  40.463563,  43.254104,
        46.04463 ,  48.835138,  51.625625,  54.416085,  57.206511,  59.996894,
        62.78722 ,  65.577469,  68.367612,  71.157602,  73.947359,  76.736738,
        79.525439,  82.31274 ,  85.096348,  87.863614])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9abe8b4d-3b2c-44d3-8516-2c117c02b350' class='xr-section-summary-in' type='checkbox'  checked><label for='section-9abe8b4d-3b2c-44d3-8516-2c117c02b350' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>depth</span></div><div class='xr-var-dims'>(lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan nan ... nan nan nan nan</div><input id='attrs-77b539f7-0a6f-462d-b511-832a5c43f08b' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-77b539f7-0a6f-462d-b511-832a5c43f08b' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-97fe86ed-ec34-49a2-9e7e-a61f1f1dbd00' class='xr-var-data-in' type='checkbox'><label for='data-97fe86ed-ec34-49a2-9e7e-a61f1f1dbd00' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       ...,
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-792f20c9-28fb-4320-8240-826e17c5df11' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-792f20c9-28fb-4320-8240-826e17c5df11' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<p>可以进一步用 <code class="docutils literal notranslate"><span class="pre">sortby</span></code> 来把坐标换成我们习惯的顺序，但并不是必须的。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ds_new</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">assign_coords</span><span class="p">({</span><span class="s1">&#39;lon&#39;</span><span class="p">:(((</span><span class="n">ds</span><span class="o">.</span><span class="n">lon</span><span class="o">+</span><span class="mi">180</span><span class="p">)</span><span class="o">%</span><span class="k">360</span>)-180)}).sortby(&#39;lon&#39;)
<span class="n">ds_new</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:  (lat: 64, lon: 128)
Coordinates:
  * lon      (lon) float64 -180.0 -177.2 -174.4 -171.6 ... 171.6 174.4 177.2
  * lat      (lat) float64 -87.86 -85.1 -82.31 -79.53 ... 79.53 82.31 85.1 87.86
Data variables:
    depth    (lat, lon) float64 nan nan nan nan nan nan ... nan nan nan nan nan</pre><div class='xr-wrap' hidden><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-1b9cfda1-ffd0-4d55-9e60-d195166f0c38' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-1b9cfda1-ffd0-4d55-9e60-d195166f0c38' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 64</li><li><span class='xr-has-index'>lon</span>: 128</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-703bcdd6-d4fb-493b-ad9c-e5e6b97259b0' class='xr-section-summary-in' type='checkbox'  checked><label for='section-703bcdd6-d4fb-493b-ad9c-e5e6b97259b0' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-180.0 -177.2 ... 174.4 177.2</div><input id='attrs-0c9e5cea-ee41-4200-a5d2-712107df632a' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-0c9e5cea-ee41-4200-a5d2-712107df632a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-28f9113d-40f7-42aa-ba61-87a721ebc369' class='xr-var-data-in' type='checkbox'><label for='data-28f9113d-40f7-42aa-ba61-87a721ebc369' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([-180.    , -177.1875, -174.375 , -171.5625, -168.75  , -165.9375,
       -163.125 , -160.3125, -157.5   , -154.6875, -151.875 , -149.0625,
       -146.25  , -143.4375, -140.625 , -137.8125, -135.    , -132.1875,
       -129.375 , -126.5625, -123.75  , -120.9375, -118.125 , -115.3125,
       -112.5   , -109.6875, -106.875 , -104.0625, -101.25  ,  -98.4375,
        -95.625 ,  -92.8125,  -90.    ,  -87.1875,  -84.375 ,  -81.5625,
        -78.75  ,  -75.9375,  -73.125 ,  -70.3125,  -67.5   ,  -64.6875,
        -61.875 ,  -59.0625,  -56.25  ,  -53.4375,  -50.625 ,  -47.8125,
        -45.    ,  -42.1875,  -39.375 ,  -36.5625,  -33.75  ,  -30.9375,
        -28.125 ,  -25.3125,  -22.5   ,  -19.6875,  -16.875 ,  -14.0625,
        -11.25  ,   -8.4375,   -5.625 ,   -2.8125,    0.    ,    2.8125,
          5.625 ,    8.4375,   11.25  ,   14.0625,   16.875 ,   19.6875,
         22.5   ,   25.3125,   28.125 ,   30.9375,   33.75  ,   36.5625,
         39.375 ,   42.1875,   45.    ,   47.8125,   50.625 ,   53.4375,
         56.25  ,   59.0625,   61.875 ,   64.6875,   67.5   ,   70.3125,
         73.125 ,   75.9375,   78.75  ,   81.5625,   84.375 ,   87.1875,
         90.    ,   92.8125,   95.625 ,   98.4375,  101.25  ,  104.0625,
        106.875 ,  109.6875,  112.5   ,  115.3125,  118.125 ,  120.9375,
        123.75  ,  126.5625,  129.375 ,  132.1875,  135.    ,  137.8125,
        140.625 ,  143.4375,  146.25  ,  149.0625,  151.875 ,  154.6875,
        157.5   ,  160.3125,  163.125 ,  165.9375,  168.75  ,  171.5625,
        174.375 ,  177.1875])</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-87.86 -85.1 -82.31 ... 85.1 87.86</div><input id='attrs-f122249b-34e2-4642-835e-b262998965b6' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f122249b-34e2-4642-835e-b262998965b6' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-071c9c92-c4aa-4916-9dc2-0fb31ff38b8c' class='xr-var-data-in' type='checkbox'><label for='data-071c9c92-c4aa-4916-9dc2-0fb31ff38b8c' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>long_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>axis :</span></dt><dd>Y</dd></dl></div><div class='xr-var-data'><pre>array([-87.863614, -85.096348, -82.31274 , -79.525439, -76.736738, -73.947359,
       -71.157602, -68.367612, -65.577469, -62.78722 , -59.996894, -57.206511,
       -54.416085, -51.625625, -48.835138, -46.04463 , -43.254104, -40.463563,
       -37.67301 , -34.882447, -32.091876, -29.301298, -26.510713, -23.720124,
       -20.92953 , -18.138933, -15.348332, -12.55773 ,  -9.767125,  -6.976519,
        -4.185912,  -1.395304,   1.395304,   4.185912,   6.976519,   9.767125,
        12.55773 ,  15.348332,  18.138933,  20.92953 ,  23.720124,  26.510713,
        29.301298,  32.091876,  34.882447,  37.67301 ,  40.463563,  43.254104,
        46.04463 ,  48.835138,  51.625625,  54.416085,  57.206511,  59.996894,
        62.78722 ,  65.577469,  68.367612,  71.157602,  73.947359,  76.736738,
        79.525439,  82.31274 ,  85.096348,  87.863614])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-8b5c6436-804f-4c57-b9aa-d5e70bdc12b1' class='xr-section-summary-in' type='checkbox'  checked><label for='section-8b5c6436-804f-4c57-b9aa-d5e70bdc12b1' class='xr-section-summary' >Data variables: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>depth</span></div><div class='xr-var-dims'>(lat, lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>nan nan nan nan ... nan nan nan nan</div><input id='attrs-cacce666-28f7-4306-bcc9-ade9b42e4504' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-cacce666-28f7-4306-bcc9-ade9b42e4504' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-92351be8-52c0-466a-b485-e4a3a25c1fd1' class='xr-var-data-in' type='checkbox'><label for='data-92351be8-52c0-466a-b485-e4a3a25c1fd1' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><div class='xr-var-data'><pre>array([[nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       ...,
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan],
       [nan, nan, nan, ..., nan, nan, nan]])</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-9d99ce43-085d-493d-88cb-e00f943f1d07' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9d99ce43-085d-493d-88cb-e00f943f1d07' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">,</span> <span class="n">projection</span><span class="o">=</span><span class="n">proj</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="s1">&#39;auto&#39;</span><span class="p">)</span>

<span class="n">ds_new</span><span class="o">.</span><span class="n">depth</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span><span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">vmax</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">([</span><span class="o">-</span><span class="mi">150</span><span class="p">,</span> <span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">150</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">([</span><span class="o">-</span><span class="mi">90</span><span class="p">,</span> <span class="o">-</span><span class="mi">60</span><span class="p">,</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">90</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LongitudeFormatter</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LatitudeFormatter</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_53_0.png" src="../_images/Cartopy_1_53_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="id4">
<h2>展示卫星图像<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">cartopy</span> <span class="kn">import</span> <span class="n">config</span>
<span class="kn">import</span> <span class="nn">cartopy.crs</span> <span class="k">as</span> <span class="nn">ccrs</span>


<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>

<span class="c1"># get the path of the file. It can be found in the repo data directory.</span>
<span class="n">fname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">[</span><span class="s2">&quot;repo_data_dir&quot;</span><span class="p">],</span>
                     <span class="s1">&#39;raster&#39;</span><span class="p">,</span> <span class="s1">&#39;sample&#39;</span><span class="p">,</span> <span class="s1">&#39;Miriam.A2012270.2050.2km.jpg&#39;</span>
                     <span class="p">)</span>
<span class="n">img_extent</span> <span class="o">=</span> <span class="p">(</span><span class="o">-</span><span class="mf">120.67660000000001</span><span class="p">,</span> <span class="o">-</span><span class="mf">106.32104523100001</span><span class="p">,</span> <span class="mf">13.2301484511245</span><span class="p">,</span> <span class="mf">30.766899999999502</span><span class="p">)</span>
<span class="n">img</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Hurricane Miriam from the Aqua/MODIS satellite</span><span class="se">\n</span><span class="s1">&#39;</span>
          <span class="s1">&#39;2012 09/26/2012 20:50 UTC&#39;</span><span class="p">)</span>

<span class="c1"># set a margin around the data</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xmargin</span><span class="p">(</span><span class="mf">0.05</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ymargin</span><span class="p">(</span><span class="mf">0.10</span><span class="p">)</span>

<span class="c1"># add the image. Because this image was a tif, the &quot;origin&quot; of the image is in the</span>
<span class="c1"># upper left corner</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="n">img_extent</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;110m&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># mark a known place to help us geo-locate ourselves</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="o">-</span><span class="mf">117.1625</span><span class="p">,</span> <span class="mf">32.715</span><span class="p">,</span> <span class="s1">&#39;bo&#39;</span><span class="p">,</span> <span class="n">markersize</span><span class="o">=</span><span class="mi">7</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geodetic</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="o">-</span><span class="mi">117</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="s1">&#39;San Diego&#39;</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geodetic</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(-117, 33, &#39;San Diego&#39;)
</pre></div>
</div>
<img alt="../_images/Cartopy_1_55_1.png" src="../_images/Cartopy_1_55_1.png" />
</div>
</div>
<div class="section" id="id5">
<h3>风云卫星图像<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>风云4A 是我国第二代地球同步卫星。根据 http://fy4.nsmc.org.cn/portal/cn/operation/status.html, 风云4A 卫星高度为 35755 km，中心经度在104.7°E，我们可以据此构建一个同步卫星投影方法，从而将卫星图像叠加到采用任何投影的地图上去。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fy_proj</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">Geostationary</span><span class="p">(</span><span class="n">satellite_height</span><span class="o">=</span><span class="mi">35755000</span><span class="p">,</span><span class="n">central_longitude</span><span class="o">=</span><span class="mf">104.7</span><span class="p">)</span>
<span class="n">fy_proj</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
  "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Created with matplotlib (https://matplotlib.org/) -->
<svg height="177.48pt" version="1.1" viewBox="0 0 177.48 177.48" width="177.48pt" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
 <metadata>
  <rdf:RDF xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
   <cc:Work>
    <dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"/>
    <dc:date>2021-04-21T18:11:11.849873</dc:date>
    <dc:format>image/svg+xml</dc:format>
    <dc:creator>
     <cc:Agent>
      <dc:title>Matplotlib v3.3.4, https://matplotlib.org/</dc:title>
     </cc:Agent>
    </dc:creator>
   </cc:Work>
  </rdf:RDF>
 </metadata>
 <defs>
  <style type="text/css">*{stroke-linecap:butt;stroke-linejoin:round;}</style>
 </defs>
 <g id="figure_1">
  <g id="patch_1">
   <path d="M 0 177.48 
L 177.48 177.48 
L 177.48 0 
L 0 0 
z
" style="fill:none;"/>
  </g>
  <g id="axes_1">
   <g id="patch_2">
    <path d="M 170.28 88.74 
L 169.840105 97.230838 
L 168.524589 105.630733 
L 166.345964 113.84954 
L 163.325137 121.798715 
L 159.491448 129.392142 
L 154.882713 136.546979 
L 149.545206 143.184529 
L 143.533562 149.231125 
L 136.910559 154.619028 
L 129.746743 159.28731 
L 122.119858 163.182707 
L 114.114085 166.260409 
L 105.819067 168.484768 
L 97.328739 169.829874 
L 88.74 170.28 
L 80.151261 169.829874 
L 71.660933 168.484768 
L 63.365915 166.260409 
L 55.360142 163.182707 
L 47.733257 159.28731 
L 40.569441 154.619028 
L 33.946438 149.231125 
L 27.934794 143.184529 
L 22.597287 136.546979 
L 17.988552 129.392142 
L 14.154863 121.798715 
L 11.134036 113.84954 
L 8.955411 105.630733 
L 7.639895 97.230838 
L 7.2 88.74 
L 7.639895 80.249162 
L 8.955411 71.849267 
L 11.134036 63.63046 
L 14.154863 55.681285 
L 17.988552 48.087858 
L 22.597287 40.933021 
L 27.934794 34.295471 
L 33.946438 28.248875 
L 40.569441 22.860972 
L 47.733257 18.19269 
L 55.360142 14.297293 
L 63.365915 11.219591 
L 71.660933 8.995232 
L 80.151261 7.650126 
L 88.74 7.2 
L 97.328739 7.650126 
L 105.819067 8.995232 
L 114.114085 11.219591 
L 122.119858 14.297293 
L 129.746743 18.19269 
L 136.910559 22.860972 
L 143.533562 28.248875 
L 149.545206 34.295471 
L 154.882713 40.933021 
L 159.491448 48.087858 
L 163.325137 55.681285 
L 166.345964 63.63046 
L 168.524589 71.849267 
L 169.840105 80.249162 
L 170.28 88.74 
L 170.28 88.74 
" style="fill:#ffffff;"/>
   </g>
   <g id="PathCollection_1">
    <path clip-path="url(#p96d7315648)" d="M 143.2572 92.886685 
L 145.247103 93.965457 
L 147.286977 94.849022 
L 147.998117 95.64726 
L 148.550609 96.429453 
L 148.65108 97.351862 
L 150.315916 98.285795 
L 150.493087 99.107509 
L 149.534001 99.29674 
L 149.665459 100.330081 
L 150.469515 101.325508 
L 150.926038 102.94631 
L 151.493738 102.876789 
L 151.367257 103.560096 
L 152.075674 103.795005 
L 151.749506 104.094834 
L 152.663223 104.701196 
L 152.494584 105.146814 
L 151.855149 105.278257 
L 151.678748 104.890846 
L 150.871547 104.749771 
L 149.901395 104.554296 
L 149.240979 103.596602 
L 148.757806 102.763217 
L 148.364026 101.41831 
L 147.031719 100.770493 
L 146.055339 101.238575 
L 145.320657 101.771534 
L 145.340534 102.920696 
L 144.393603 103.480498 
L 143.782149 103.235848 
L 142.586157 103.200476 
L 141.660892 101.935446 
L 140.461433 101.643894 
L 140.118049 102.099668 
L 138.541466 102.179956 
L 139.185894 100.881699 
L 140.003778 100.427697 
L 139.810923 98.70716 
L 139.29652 97.378649 
L 136.890311 96.052674 
L 135.817058 95.929076 
L 133.872638 94.458398 
L 133.444561 95.245097 
L 132.917356 95.391462 
L 132.629403 94.802016 
L 132.648515 94.1002 
L 131.619321 93.311819 
L 133.114026 92.72165 
L 134.080862 92.748276 
L 133.977461 92.32029 
L 131.977674 92.325698 
L 131.446123 91.362949 
L 130.201635 91.066847 
L 129.613083 90.26427 
L 131.505479 89.868125 
L 132.217432 89.338957 
L 134.401647 90.001166 
L 134.608179 90.601327 
L 134.931619 93.210531 
L 136.272839 94.165482 
L 137.41366 92.452827 
L 138.908244 91.476266 
L 140.030451 91.470293 
L 141.081408 92.0237 
L 141.974882 92.590298 
L 143.2572 92.886685 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 104.443867 81.263597 
L 105.077685 80.649772 
L 106.438629 79.754455 
L 107.652918 78.619249 
L 108.426173 77.345035 
L 109.072035 77.34319 
L 109.915647 78.174052 
L 110.008746 78.885374 
L 111.068542 79.346956 
L 112.402657 79.846144 
L 112.307274 80.487183 
L 111.246192 80.563678 
L 111.548315 81.36605 
L 110.38782 81.921156 
L 109.502794 83.404289 
L 110.699356 84.96679 
L 110.430545 85.724692 
L 112.228239 87.252625 
L 110.338921 87.445783 
L 109.806473 88.570834 
L 109.87359 90.066677 
L 108.320719 91.197072 
L 108.264649 92.840805 
L 107.608649 95.36252 
L 107.380069 94.777436 
L 105.52887 95.523592 
L 104.89822 94.517493 
L 103.736209 94.426646 
L 102.92578 93.899171 
L 100.968449 94.496429 
L 100.374379 93.697596 
L 99.293012 93.789897 
L 97.930996 93.600585 
L 97.687452 91.380209 
L 96.860722 90.91997 
L 96.065141 89.502012 
L 95.833685 88.051143 
L 96.025271 86.514904 
L 97.008937 85.414161 
L 98.226044 85.98264 
L 99.503422 85.674033 
L 99.828257 84.273099 
L 100.530016 83.96207 
L 102.49762 83.607169 
L 103.657523 82.303651 
L 104.443867 81.263597 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 18.044635 107.598928 
L 18.354426 108.241738 
L 18.730916 109.230172 
L 19.240224 111.008716 
L 19.585119 111.708243 
L 19.687114 112.403344 
L 19.671679 112.821831 
L 19.222568 111.948045 
L 19.200871 112.368796 
L 19.608618 113.456892 
L 19.71196 114.065578 
L 19.615911 114.382243 
L 19.918554 115.596887 
L 20.158819 117.235066 
L 20.472602 119.147315 
L 21.026257 121.739061 
L 21.535503 123.614989 
L 21.919363 125.147268 
L 21.587105 125.396414 
L 21.351611 125.886849 
L 20.890121 125.496727 
L 20.264639 124.950768 
L 19.816666 124.219978 
L 19.280215 123.018285 
L 18.664392 121.906233 
L 18.234904 120.914954 
L 17.95249 119.936584 
L 18.101233 119.732091 
L 17.9362 119.271076 
L 17.818964 118.250597 
L 17.567435 117.364893 
L 17.226119 116.682899 
L 16.843987 115.780039 
L 16.406578 114.467737 
L 16.363229 113.692067 
L 16.184034 112.79201 
L 16.444473 112.769128 
L 16.680936 112.507493 
L 16.826284 112.268456 
L 17.079878 112.274826 
L 17.213367 111.482279 
L 17.507911 110.631378 
L 17.52879 109.91182 
L 17.300995 109.278119 
L 17.614393 109.476403 
L 17.757612 108.481386 
L 17.588661 107.593756 
L 17.682581 106.946049 
L 18.044635 107.598928 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 162.587957 112.1915 
L 162.661677 112.973316 
L 162.453012 113.180872 
L 162.465722 112.577018 
L 162.587957 112.1915 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 162.465173 111.897138 
L 162.497645 111.509221 
L 162.766424 110.407257 
L 162.89364 110.823486 
L 162.672127 111.971066 
L 162.588647 111.807206 
L 162.465173 111.897138 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 134.330242 99.842631 
L 134.278216 98.639391 
L 134.549196 98.060313 
L 134.85814 97.514881 
L 135.133547 97.980455 
L 135.084488 98.744185 
L 134.330242 99.842631 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 159.561945 119.596192 
L 159.656825 120.388935 
L 159.667169 120.979275 
L 159.356727 121.337276 
L 159.229041 121.010665 
L 159.099133 120.44749 
L 159.028252 119.764386 
L 159.014451 118.832931 
L 159.100148 118.369041 
L 159.331859 118.358067 
L 159.471025 118.791779 
L 159.536166 119.232084 
L 159.561945 119.596192 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 155.356375 94.426113 
L 155.667145 94.916686 
L 155.723857 95.719573 
L 155.419677 96.137143 
L 155.310231 95.226251 
L 155.135574 94.630607 
L 154.751173 94.127923 
L 154.257726 93.471188 
L 153.59867 93.020776 
L 153.874867 92.641502 
L 154.362772 93.072508 
L 154.662176 93.411195 
L 155.028398 93.779422 
L 155.356375 94.426113 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 153.908295 97.830163 
L 153.365614 98.218553 
L 152.847657 98.592961 
L 152.337103 98.603084 
L 151.57251 98.169448 
L 151.037454 97.746692 
L 151.157128 97.262272 
L 152.029345 97.472301 
L 152.571072 97.339662 
L 152.770681 96.590809 
L 152.911263 96.549688 
L 152.943969 97.373424 
L 153.494209 97.24345 
L 153.798173 96.706883 
L 154.354163 96.143346 
L 154.310494 95.230266 
L 154.860581 95.191584 
L 155.027954 95.443047 
L 154.9535 96.302905 
L 154.57943 97.254443 
L 154.089264 97.392361 
L 153.908295 97.830163 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 161.466598 104.549484 
L 161.554135 105.048674 
L 161.114512 105.068126 
L 161.022643 104.167052 
L 161.347971 104.503896 
L 161.466598 104.549484 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 161.398714 103.250504 
L 161.258916 103.531444 
L 160.964182 102.260291 
L 160.946554 101.369241 
L 161.174522 101.358359 
L 161.246174 102.546849 
L 161.398714 103.250504 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 160.79374 103.689371 
L 160.527202 103.7374 
L 160.131177 103.608816 
L 160.020754 103.385432 
L 160.152975 102.786759 
L 160.5727 102.999538 
L 160.745135 103.302223 
L 160.79374 103.689371 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 160.357829 100.94663 
L 160.460517 101.417845 
L 160.449847 101.719248 
L 159.981591 101.104456 
L 159.65301 100.577414 
L 159.436412 100.083486 
L 159.563871 99.92474 
L 159.857971 100.275488 
L 160.357829 100.94663 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 158.694633 99.504416 
L 158.944842 99.989919 
L 158.783563 100.082086 
L 158.485164 99.747296 
L 158.230089 99.131444 
L 158.296262 98.875752 
L 158.694633 99.504416 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 157.021448 96.985573 
L 157.245399 97.328051 
L 157.558378 98.289919 
L 157.89018 98.79808 
L 157.734996 99.229701 
L 157.49303 99.389833 
L 157.19788 98.812822 
L 156.924186 97.848391 
L 156.838844 96.681259 
L 156.966432 96.529663 
L 157.021448 96.985573 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 144.563947 146.597531 
L 145.360366 145.966709 
L 146.053681 145.363251 
L 146.90083 144.532869 
L 147.257946 144.223788 
L 147.823633 143.612352 
L 148.464647 143.039085 
L 148.138228 143.472288 
L 147.819893 143.888593 
L 148.398582 143.378419 
L 148.082865 143.797836 
L 147.68679 144.243633 
L 147.146318 144.771186 
L 146.257487 145.608938 
L 145.720852 146.07878 
L 145.359015 146.529468 
L 145.121547 146.626241 
L 144.490516 147.10078 
L 143.761531 147.785603 
L 142.571385 148.843656 
L 141.863562 149.361825 
L 141.40645 149.690163 
L 141.10425 149.768765 
L 141.196771 149.521052 
L 140.850249 149.569536 
L 141.145811 149.231222 
L 142.083635 148.445368 
L 143.522093 147.32298 
L 143.941356 147.062704 
L 144.563947 146.597531 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 134.456698 145.95529 
L 134.873196 145.972525 
L 134.023351 147.230276 
L 133.49805 147.623166 
L 132.796661 148.465577 
L 132.744677 148.215769 
L 131.677492 148.992845 
L 131.560304 148.956885 
L 131.108544 148.980424 
L 131.265115 148.155478 
L 131.641613 147.47769 
L 131.798028 146.603218 
L 132.145687 146.10699 
L 132.62566 146.145051 
L 133.161212 146.430194 
L 133.697423 146.233735 
L 134.456698 145.95529 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 117.274049 137.423918 
L 115.779551 138.127341 
L 114.620698 138.460042 
L 114.206664 139.126381 
L 113.613404 139.648944 
L 111.733682 139.855259 
L 110.673206 139.666389 
L 108.841623 139.914083 
L 107.942026 140.59381 
L 107.581886 140.548854 
L 106.179417 141.316819 
L 104.396895 141.313388 
L 103.155426 140.56248 
L 102.489041 140.342711 
L 102.623198 139.630531 
L 103.303898 139.447156 
L 103.571522 139.15713 
L 103.593631 138.705591 
L 103.888879 137.818391 
L 103.849162 137.059963 
L 103.310346 135.757795 
L 103.18152 135.009258 
L 103.335263 134.250472 
L 102.884044 133.386403 
L 102.893673 132.989773 
L 102.328537 132.458614 
L 102.262995 131.387854 
L 101.549377 130.302951 
L 101.403004 129.709705 
L 101.982173 130.305067 
L 101.612623 129.011602 
L 102.295517 129.409725 
L 102.670772 129.945942 
L 102.716648 129.228253 
L 102.098948 128.125144 
L 101.997434 127.678535 
L 101.692674 127.255192 
L 101.92076 126.422029 
L 102.25313 126.062748 
L 102.514738 125.334705 
L 102.42318 124.48374 
L 103.124761 123.418333 
L 103.147995 124.535995 
L 103.862426 123.517398 
L 105.119636 123.007182 
L 105.904209 122.364786 
L 107.096633 121.801871 
L 107.786192 121.674869 
L 108.177882 121.852038 
L 109.404577 121.276845 
L 110.320375 121.095538 
L 110.579893 120.763759 
L 110.986009 120.620034 
L 111.797305 120.640331 
L 113.390318 120.171538 
L 114.264322 119.488096 
L 114.732626 118.673638 
L 115.68055 117.886531 
L 115.948562 116.446216 
L 117.11968 115.120913 
L 117.585067 116.434398 
L 118.239296 116.116129 
L 117.805132 115.401403 
L 118.346961 114.644738 
L 118.951278 114.965818 
L 119.260246 113.78703 
L 120.138413 113.008226 
L 120.554908 112.387413 
L 121.311747 112.107773 
L 121.381257 111.671485 
L 121.995705 111.841041 
L 122.063648 111.448273 
L 123.435044 110.987404 
L 124.403976 111.681343 
L 125.074057 112.583822 
L 125.945705 112.573881 
L 126.806971 112.697641 
L 126.623235 111.854007 
L 127.439133 110.590801 
L 128.109743 110.168844 
L 127.940782 109.78333 
L 128.641835 108.875772 
L 129.534745 108.304211 
L 130.210435 108.475166 
L 131.37839 108.154051 
L 131.445078 107.352489 
L 130.509982 106.855466 
L 131.25624 106.611455 
L 132.104578 106.982585 
L 132.7389 107.61051 
L 133.799483 107.984555 
L 134.191173 107.817143 
L 134.933843 108.276918 
L 135.739417 107.810729 
L 136.200273 107.933978 
L 136.535006 107.626513 
L 137.01231 108.381246 
L 136.56463 109.221764 
L 135.998787 109.861525 
L 135.556924 109.925688 
L 135.614659 110.539561 
L 134.562589 112.091324 
L 134.585594 112.521691 
L 135.447752 113.333735 
L 136.318271 113.78852 
L 136.855345 114.288084 
L 137.560886 115.149855 
L 137.89809 115.134985 
L 138.44307 115.494854 
L 138.528686 115.950723 
L 139.5329 116.409537 
L 140.39693 115.865502 
L 142.028273 112.325668 
L 142.003339 111.597137 
L 142.163417 111.150751 
L 142.179988 110.281505 
L 142.516851 109.120772 
L 142.784978 108.80084 
L 142.685281 108.292839 
L 143.41979 106.608978 
L 143.508868 106.165997 
L 144.009111 105.572114 
L 144.226207 106.320495 
L 144.166691 107.287389 
L 144.418151 107.464421 
L 144.368003 108.109324 
L 144.647518 108.875536 
L 144.452729 110.293968 
L 144.631297 111.470314 
L 145.428843 110.868922 
L 145.66259 111.494824 
L 146.054955 112.061555 
L 145.813793 112.733794 
L 145.761416 114.744323 
L 145.980082 114.912187 
L 145.962454 116.163095 
L 145.678514 116.932356 
L 145.754209 117.907442 
L 146.624793 118.602419 
L 147.571707 119.830131 
L 147.346871 120.186706 
L 147.608923 121.045147 
L 147.477633 122.552249 
L 147.93872 122.2139 
L 148.098943 122.795458 
L 148.386959 122.561618 
L 148.029677 124.032294 
L 148.530768 125.320555 
L 148.749464 126.36705 
L 148.538296 127.433741 
L 147.832156 129.031002 
L 147.709901 130.115509 
L 146.713283 131.896225 
L 144.039475 135.900471 
L 143.135814 136.57687 
L 140.902283 139.258892 
L 140.251536 139.887904 
L 138.934057 141.606894 
L 138.746354 141.966971 
L 138.0474 142.418963 
L 137.130855 142.563881 
L 136.090412 143.115387 
L 134.637169 144.131484 
L 134.250837 143.708699 
L 133.847581 143.563281 
L 134.335094 142.956686 
L 133.732711 143.220152 
L 132.479451 144.115263 
L 131.481672 143.751621 
L 131.00457 143.717949 
L 130.286451 143.467779 
L 130.051267 142.811474 
L 130.398891 141.365666 
L 130.147775 140.922319 
L 129.248988 140.852257 
L 129.853586 140.245286 
L 130.01626 139.363063 
L 129.135603 140.23954 
L 128.115839 140.526783 
L 128.957347 139.819575 
L 129.424476 139.104167 
L 130.088547 138.472626 
L 130.395154 137.557738 
L 129.091149 138.676861 
L 128.250823 139.143024 
L 127.430518 140.14054 
L 126.808698 139.69556 
L 127.109881 139.042693 
L 126.78323 138.187133 
L 126.377182 137.753989 
L 126.696333 137.451164 
L 125.524541 136.76808 
L 124.728575 136.776376 
L 123.815488 136.213054 
L 121.645581 136.440346 
L 118.425844 137.458722 
L 117.274049 137.423918 
L 117.274049 137.423918 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 52.41345 76.511489 
L 52.100952 78.194489 
L 51.469297 78.66067 
L 50.198298 79.042719 
L 49.587963 77.766936 
L 49.484596 75.460086 
L 50.324633 72.856347 
L 51.236328 73.72787 
L 51.821905 74.846181 
L 52.41345 76.511489 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 127.928492 93.300378 
L 129.482996 93.765999 
L 129.957219 95.002293 
L 128.785195 94.341818 
L 127.595215 94.212831 
L 126.778159 94.324683 
L 125.774662 94.272784 
L 126.142384 93.376068 
L 127.928492 93.300378 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 124.254146 94.928177 
L 123.238819 94.634541 
L 122.966459 93.934136 
L 124.468221 93.849115 
L 124.820439 94.384641 
L 124.254146 94.928177 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 125.867645 85.192784 
L 125.985945 86.083374 
L 126.846314 86.228523 
L 126.989303 86.894339 
L 126.921693 88.318627 
L 126.171671 88.158566 
L 125.950093 89.151316 
L 126.546691 90.011944 
L 126.137812 90.208174 
L 125.5528 89.175175 
L 125.110851 87.087987 
L 125.39151 85.784699 
L 125.867645 85.192784 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 118.379409 87.302891 
L 120.139481 87.236084 
L 121.626414 86.048914 
L 121.893189 86.415186 
L 120.689604 88.038603 
L 119.545746 88.353459 
L 118.067396 88.031859 
L 115.479196 88.112738 
L 114.108253 88.349289 
L 113.883183 89.595904 
L 115.281482 91.05819 
L 116.129917 90.312186 
L 119.015921 89.750521 
L 118.885741 90.506478 
L 118.217351 90.268834 
L 117.539959 91.231946 
L 116.167344 91.871365 
L 117.602018 93.970589 
L 117.308256 94.534534 
L 118.641699 96.416105 
L 118.593748 97.488328 
L 117.759278 97.973082 
L 117.175626 97.403124 
L 117.959968 96.061174 
L 116.427552 96.702302 
L 116.054377 96.251513 
L 116.272183 95.618457 
L 115.171007 94.66198 
L 115.315458 93.061659 
L 114.262325 93.564126 
L 114.35801 95.477929 
L 114.359192 97.820313 
L 113.357997 98.063196 
L 112.695812 97.586604 
L 113.186609 96.076285 
L 112.975508 94.493019 
L 112.310414 94.483072 
L 111.83536 93.357685 
L 112.504745 92.278017 
L 112.742252 90.969926 
L 113.545197 88.485878 
L 113.874809 87.806982 
L 115.204274 86.585672 
L 116.426815 87.072805 
L 118.379409 87.302891 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 113.811767 105.494236 
L 111.808076 104.385825 
L 113.277897 104.055516 
L 114.066919 104.538807 
L 114.579674 105.022177 
L 114.462349 105.456837 
L 113.811767 105.494236 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 115.57637 102.702936 
L 116.605753 102.570285 
L 118.005458 101.964786 
L 117.734334 102.864586 
L 115.409091 103.34555 
L 113.359176 103.16516 
L 113.38143 102.573509 
L 114.631503 102.226347 
L 115.57637 102.702936 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 110.783399 102.460079 
L 111.761581 102.320298 
L 112.1209 103.006324 
L 110.289012 103.345753 
L 109.18484 103.571303 
L 108.332335 103.564399 
L 108.914079 102.626948 
L 109.784276 102.608233 
L 110.230685 102.031054 
L 110.783399 102.460079 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 95.012459 99.356614 
L 95.232768 99.940059 
L 98.386098 100.096837 
L 98.75782 99.419994 
L 101.782523 100.199066 
L 102.352851 101.256693 
L 104.776468 101.543465 
L 106.720095 102.500499 
L 104.8681 103.130075 
L 103.111365 102.483942 
L 101.641943 102.534769 
L 99.954911 102.420687 
L 98.430751 102.133001 
L 96.53965 101.51434 
L 95.333892 101.354935 
L 94.646681 101.560687 
L 91.64143 100.890749 
L 91.35748 100.186181 
L 89.842414 100.066372 
L 90.983706 98.495853 
L 92.995694 98.591551 
L 94.32778 99.232407 
L 95.012459 99.356614 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 88.188821 90.539988 
L 88.472011 91.696874 
L 89.053579 92.621944 
L 90.278717 92.768359 
L 91.088832 93.816516 
L 90.66699 95.87361 
L 90.595542 98.424344 
L 88.757241 98.459172 
L 87.356805 97.081692 
L 85.21802 95.732044 
L 84.502496 94.729738 
L 83.238236 93.381361 
L 82.408216 92.139448 
L 81.138952 89.818419 
L 79.680202 88.436387 
L 79.19502 87.011429 
L 78.588547 85.718509 
L 77.104273 84.677553 
L 76.254194 83.264146 
L 75.027626 82.341723 
L 73.348889 80.530492 
L 73.220578 79.694073 
L 74.267955 79.756987 
L 76.796208 80.067837 
L 78.232458 81.676481 
L 79.50044 82.794245 
L 80.40913 83.481037 
L 81.974292 85.259394 
L 83.665919 85.284582 
L 85.064607 86.419751 
L 86.029146 87.808592 
L 87.300728 88.56653 
L 86.631623 89.921279 
L 87.588905 90.497447 
L 88.188821 90.539988 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 114.384064 68.092703 
L 113.516105 66.877817 
L 114.82213 66.95369 
L 115.392741 67.529457 
L 115.093973 68.892708 
L 114.384064 68.092703 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 117.347744 72.469928 
L 117.699018 72.025205 
L 117.797912 71.034329 
L 118.620463 70.951417 
L 118.454048 72.024548 
L 119.451254 70.497713 
L 119.420606 72.018596 
L 118.917468 72.538283 
L 118.510228 73.547372 
L 118.063181 74.018743 
L 117.061316 72.896278 
L 117.347744 72.469928 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 123.173181 75.054526 
L 123.388123 76.126284 
L 123.526077 77.0326 
L 123.098398 78.508575 
L 122.474201 76.853287 
L 121.821059 77.667321 
L 122.35251 78.866288 
L 121.956972 79.624061 
L 120.149669 78.666954 
L 119.672793 77.488162 
L 120.095758 76.72175 
L 119.100003 75.947245 
L 118.657412 76.61412 
L 117.937828 76.54532 
L 116.844739 77.441609 
L 116.56954 76.964012 
L 117.107933 75.602612 
L 118.045673 75.156922 
L 118.838684 74.557235 
L 119.413703 75.293312 
L 120.530624 74.863847 
L 120.730333 74.148213 
L 121.778142 74.118133 
L 121.60587 72.876461 
L 122.85347 73.65223 
L 123.031702 74.462014 
L 123.173181 75.054526 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 96.240581 59.349087 
L 94.94317 58.869016 
L 94.861138 57.561025 
L 95.604824 56.880213 
L 97.277148 56.468646 
L 98.164417 56.510588 
L 98.535638 57.08779 
L 97.886089 57.748137 
L 97.56269 58.623075 
L 96.240581 59.349087 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 113.760137 50.440448 
L 113.256489 52.727921 
L 112.806913 53.911606 
L 111.884874 52.662331 
L 111.575679 51.58551 
L 112.207478 50.197352 
L 113.159853 49.152295 
L 113.863121 49.589693 
L 113.760137 50.440448 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 130.69472 32.802818 
L 130.490253 33.861906 
L 131.148231 35.049885 
L 131.2745 35.952934 
L 131.74265 36.559905 
L 131.650036 37.361391 
L 130.643433 37.830841 
L 128.871393 37.773311 
L 127.95186 39.073464 
L 127.031043 38.550963 
L 126.610236 37.631699 
L 124.819452 37.782381 
L 123.71547 38.284024 
L 122.389025 38.234048 
L 123.879222 39.212011 
L 123.842212 41.325739 
L 123.249649 41.829752 
L 122.5139 41.29964 
L 122.434683 40.162552 
L 121.566111 39.756962 
L 120.80336 38.871903 
L 121.780991 38.544287 
L 122.111975 37.799925 
L 123.018772 37.231167 
L 123.512388 36.452046 
L 125.525741 36.229615 
L 126.767351 36.549691 
L 126.883684 34.530316 
L 127.826943 35.136145 
L 128.70019 34.090207 
L 129.014988 33.69096 
L 128.849952 32.365742 
L 127.975161 31.116718 
L 127.949741 30.46943 
L 128.776998 30.36017 
L 130.187684 31.907413 
L 130.69472 32.802818 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 129.668801 27.956273 
L 129.906749 27.592999 
L 130.929432 28.74837 
L 129.938566 28.899598 
L 129.9211 29.859009 
L 128.102475 29.012004 
L 128.371978 30.115897 
L 127.387961 30.041449 
L 126.609481 28.985209 
L 126.528627 28.231772 
L 127.41251 28.262229 
L 126.683387 26.896704 
L 126.365171 26.15813 
L 128.080169 27.279375 
L 128.947588 27.680912 
L 129.668801 27.956273 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 120.773662 19.140231 
L 121.794038 19.919827 
L 122.572142 20.710761 
L 123.674629 21.58258 
L 125.817565 23.200421 
L 124.471056 22.785383 
L 125.118443 24.030601 
L 126.65053 25.061828 
L 127.158815 25.722003 
L 126.111007 25.086259 
L 126.163014 25.767749 
L 125.397534 24.955566 
L 124.760783 24.060924 
L 123.85947 23.077809 
L 123.457873 22.431183 
L 122.454753 21.292756 
L 121.263356 20.436377 
L 120.252293 19.357346 
L 120.518735 19.072445 
L 119.87522 18.689996 
L 120.059906 18.617919 
L 120.773662 19.140231 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 111.100614 73.478084 
L 109.063359 74.999599 
L 109.794998 73.871143 
L 110.888116 72.882176 
L 111.771476 71.776633 
L 112.495412 70.192695 
L 112.847846 71.501497 
L 111.868473 72.376693 
L 111.100614 73.478084 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 115.814886 59.554912 
L 115.64997 60.181119 
L 116.273951 61.286906 
L 116.023067 62.558372 
L 115.200035 63.055392 
L 115.083502 64.303867 
L 115.531008 65.553572 
L 116.340376 65.738747 
L 116.983264 65.564177 
L 118.915737 66.464156 
L 118.854309 67.317354 
L 119.370911 67.703748 
L 119.281423 68.428747 
L 118.056344 67.635426 
L 117.433423 66.799162 
L 117.099127 67.371272 
L 116.064225 66.414167 
L 114.714628 66.626381 
L 113.932368 66.26788 
L 113.956659 65.619641 
L 114.395323 65.228007 
L 113.913899 64.859401 
L 113.765951 65.42068 
L 112.943235 64.510724 
L 112.659439 63.828276 
L 112.47251 62.34208 
L 113.124908 62.860892 
L 113.048202 60.454804 
L 113.385987 59.082943 
L 114.278124 59.10164 
L 115.231952 59.552803 
L 115.636511 59.166643 
L 115.814886 59.554912 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 116.36304 70.164606 
L 116.073897 69.403793 
L 117.01807 69.908356 
L 117.976062 69.919064 
L 117.99645 70.584021 
L 117.345781 71.25301 
L 116.413675 71.721989 
L 116.311235 70.977663 
L 116.36304 70.164606 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 121.432434 69.054045 
L 121.995585 70.831817 
L 120.82638 70.392662 
L 120.899897 70.927257 
L 121.337031 71.916706 
L 120.658736 72.265217 
L 120.513553 71.141072 
L 120.060331 71.051947 
L 119.752576 70.084653 
L 120.634459 70.224445 
L 120.565452 69.623015 
L 119.558865 68.399871 
L 120.975864 68.457837 
L 121.432434 69.054045 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 33.271178 30.007226 
L 33.261513 30.261647 
L 32.879255 30.981366 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 124.160351 38.84455 
L 124.506759 38.142279 
L 125.195334 38.322351 
L 125.446667 37.833678 
L 126.356528 38.148167 
L 126.665799 38.579193 
L 126.339917 39.292032 
L 125.730515 38.865217 
L 125.26721 39.120344 
L 125.237877 39.835831 
L 124.366496 39.436147 
L 124.160351 38.84455 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 19.494956 45.749239 
L 19.398167 45.976102 
L 19.304029 46.239933 
L 19.254998 46.385586 
L 19.609765 45.922174 
L 19.893427 45.531511 
L 20.117341 45.343725 
L 20.165997 45.427672 
L 19.855501 46.009628 
L 20.148283 45.585235 
L 20.157515 45.796717 
L 20.30915 45.789845 
L 20.624475 45.430896 
L 20.94869 44.997212 
L 20.972498 44.934456 
L 21.39768 44.336701 
L 22.032555 43.40066 
L 22.269558 43.080781 
L 22.285476 43.065496 
L 23.029176 42.053163 
L 23.741301 41.165675 
L 23.775148 41.122558 
L 24.372029 40.233757 
L 24.786201 39.728723 
L 25.056217 39.242575 
L 25.485949 38.77033 
L 25.234402 38.932723 
L 25.197158 38.757717 
L 24.528041 39.491425 
L 24.069322 39.781102 
L 24.351086 39.25037 
L 24.169899 39.32603 
L 23.774594 39.825389 
L 23.55554 40.034333 
L 23.859836 39.526593 
L 23.699554 39.662012 
L 24.492544 38.59986 
L 24.812697 38.178009 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 25.350234 37.509545 
L 25.650614 37.144694 
L 26.020938 36.688591 
L 27.016043 35.532119 
L 27.253458 35.322605 
L 28.028151 34.463669 
L 28.230848 34.397372 
L 29.086675 33.57803 
L 29.617237 33.153089 
L 30.05368 32.95004 
L 29.888591 33.505044 
L 29.98711 33.762256 
L 30.530926 33.470918 
L 30.76335 33.473165 
L 31.695899 32.789046 
L 32.148982 32.321153 
L 32.686969 31.634202 
L 32.813958 31.314892 
L 32.718481 31.256296 
L 32.879255 30.981366 
L 33.261513 30.261647 
L 33.271178 30.007226 
L 33.599573 29.517303 
L 33.973092 29.280355 
L 35.068197 28.373645 
L 35.298774 28.05285 
L 36.175618 27.503729 
L 36.390356 27.299218 
L 35.941868 27.548788 
L 35.61936 27.711122 
L 35.095477 28.092308 
L 34.783695 28.244547 
L 34.178018 28.697728 
L 33.55999 29.29748 
L 33.443764 29.481242 
L 33.783974 29.310964 
L 33.371278 29.684567 
L 32.901048 29.976048 
L 31.985514 30.703279 
L 32.058938 30.559854 
L 32.580145 30.066889 
L 32.635665 29.896458 
L 32.86735 29.688156 
L 33.416658 29.25769 
L 33.58519 29.066005 
L 33.520354 28.990263 
L 33.892661 28.638084 
L 33.593988 28.857494 
L 32.961112 29.431615 
L 32.078744 30.241704 
L 31.820865 30.494846 
L 31.529058 30.762083 
L 31.579155 30.701851 
L 30.333392 31.947787 
L 29.855375 32.42796 
L 29.111468 33.206341 
L 28.602049 33.766966 
L 28.25023 34.1588 
L 28.065779 34.406029 
L 27.808054 34.686513 
L 27.598088 34.874036 
L 27.258139 35.250909 
L 26.670108 35.920565 
L 26.925787 35.622499 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 60.714013 12.386206 
L 60.466639 12.48214 
L 60.042744 12.649713 
L 59.237247 12.964908 
L 58.341184 13.30874 
L 57.662301 13.569079 
L 57.689143 13.551054 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 54.995666 14.706845 
L 54.71241 14.847585 
L 56.350911 14.115365 
L 56.099312 14.261533 
L 61.953964 11.975639 
L 62.256974 11.927651 
L 60.407719 12.646138 
L 61.914897 12.123922 
L 65.297182 11.167813 
L 65.215964 11.259015 
L 67.725007 10.735268 
L 67.925163 10.574512 
L 68.440027 10.42631 
L 69.458069 10.424897 
L 69.942114 10.674226 
L 70.67561 10.44296 
L 70.696949 10.29734 
L 70.868034 10.222794 
L 70.465655 10.245172 
L 74.257334 9.103495 
L 75.410453 8.995709 
L 75.055662 9.134331 
L 74.050869 9.468625 
L 71.80961 10.588576 
L 69.763398 11.26108 
L 70.214 11.268347 
L 71.924411 10.72567 
L 72.691925 10.501995 
L 72.827802 10.312367 
L 73.524836 10.055156 
L 73.090338 10.070901 
L 73.401645 9.88945 
L 74.492143 9.534129 
L 74.577702 9.33921 
L 76.419746 8.888219 
L 76.221785 9.012344 
L 75.373151 9.291465 
L 75.684909 9.306801 
L 76.005355 9.119056 
L 77.808863 8.883195 
L 78.230804 8.978836 
L 78.356336 8.790136 
L 78.960562 8.545589 
L 85.867752 7.872285 
L 88.630894 7.635699 
L 92.129744 7.893812 
L 92.164501 7.969576 
L 90.638382 8.133078 
L 91.158962 8.166449 
L 93.225096 8.267921 
L 98.77157 8.675387 
L 101.298692 9.354801 
L 101.00094 9.087947 
L 102.453388 9.252415 
L 104.246915 9.467668 
L 103.206695 9.176405 
L 103.309206 9.112088 
L 107.752806 9.908391 
L 114.717245 11.676048 
L 116.15871 12.169259 
L 116.102567 12.148934 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 125.573477 16.177247 
L 127.102288 17.117875 
L 125.909361 16.53781 
L 126.08027 16.815627 
L 125.511156 16.533274 
L 125.698791 16.726789 
L 125.098786 16.519582 
L 125.729798 16.922934 
L 126.831917 17.751118 
L 127.501789 18.011622 
L 129.053169 19.047776 
L 128.740908 18.992246 
L 130.094055 19.939755 
L 129.902346 20.167183 
L 130.935927 21.036066 
L 130.496892 21.08916 
L 131.375619 21.892557 
L 131.568165 22.536869 
L 126.551738 18.922465 
L 125.374804 17.956124 
L 125.146834 17.609792 
L 124.683285 17.2911 
L 125.121373 17.273215 
L 123.693004 15.725166 
L 122.037542 14.894377 
L 122.786138 15.333842 
L 123.122186 15.796153 
L 121.458187 14.98011 
L 120.830563 14.975105 
L 121.522338 15.804052 
L 122.527444 16.26469 
L 121.099879 16.19519 
L 120.424018 15.736119 
L 119.504812 15.520286 
L 119.337297 15.736456 
L 117.529411 15.401798 
L 115.899819 15.357563 
L 115.442293 16.412573 
L 114.471837 17.823282 
L 115.718457 18.017972 
L 116.526518 18.518068 
L 117.398807 18.753248 
L 117.489411 18.420636 
L 118.314431 18.547148 
L 120.183584 19.497487 
L 120.8726 20.174817 
L 121.0687 20.930604 
L 121.902945 21.931365 
L 122.727061 23.30057 
L 122.516572 24.509014 
L 122.704298 25.134523 
L 121.533841 27.751681 
L 120.594338 28.260457 
L 119.984471 28.230927 
L 119.098308 27.689773 
L 118.152079 28.356401 
L 118.166231 28.69344 
L 117.747609 28.606805 
L 117.330407 29.276607 
L 117.720917 30.04744 
L 117.27898 30.255064 
L 116.90515 30.736217 
L 116.257423 30.877865 
L 115.901413 31.149119 
L 116.056179 31.628031 
L 115.974654 31.744819 
L 116.487164 31.949377 
L 117.309088 32.476252 
L 118.797447 33.878452 
L 119.365119 34.64907 
L 119.882097 36.015929 
L 119.684886 36.655914 
L 118.710253 36.836811 
L 117.932949 37.298319 
L 116.889522 37.35485 
L 116.548979 36.683939 
L 116.479802 35.788511 
L 115.554412 34.529214 
L 116.350467 34.371427 
L 115.21545 33.3402 
L 114.580915 33.095723 
L 114.51525 33.305564 
L 114.207701 33.386192 
L 114.094427 33.167628 
L 113.386717 32.852878 
L 113.534772 32.365367 
L 113.759791 32.244465 
L 113.586545 32.033648 
L 113.661913 31.442321 
L 113.5228 31.257187 
L 112.820389 31.106648 
L 112.182785 30.787025 
L 110.694348 31.041699 
L 110.003731 31.52908 
L 108.82978 31.789371 
L 109.303724 31.292611 
L 108.931851 30.851318 
L 109.617313 30.147901 
L 108.835137 29.557336 
L 107.954423 29.902308 
L 106.856871 30.618074 
L 106.315175 31.311674 
L 105.156749 31.330571 
L 104.662058 31.838123 
L 105.474477 32.625409 
L 106.515133 32.842724 
L 106.677638 33.362435 
L 107.727035 33.731786 
L 108.875297 32.948781 
L 110.063726 33.435591 
L 110.846894 33.494769 
L 111.21495 34.112696 
L 109.588378 34.379868 
L 109.176439 35.000408 
L 108.109885 35.562842 
L 107.649985 36.391066 
L 109.162171 37.104287 
L 109.934091 38.340279 
L 110.971042 39.520436 
L 112.065733 40.530629 
L 112.254158 41.491582 
L 111.505272 41.822758 
L 111.963863 42.532777 
L 112.82615 42.966706 
L 112.841651 44.046055 
L 112.707283 45.104869 
L 111.974025 45.205503 
L 110.392436 48.460141 
L 109.312825 50.119941 
L 107.492586 51.405201 
L 105.58407 52.591619 
L 103.930871 52.734646 
L 103.074311 53.373074 
L 102.51977 52.890923 
L 101.727062 53.609901 
L 99.664809 54.327095 
L 98.068165 54.5404 
L 97.619493 56.11121 
L 96.770154 56.193289 
L 96.32403 55.105825 
L 96.663004 54.533253 
L 94.595281 54.047121 
L 93.879425 54.284704 
L 91.853727 55.55074 
L 90.579245 56.967297 
L 90.244809 58.017519 
L 92.966636 61.647168 
L 94.425994 62.611941 
L 95.421885 63.870693 
L 96.224031 66.793718 
L 96.064651 69.601486 
L 94.726514 70.656461 
L 92.869038 71.691658 
L 91.541921 73.040465 
L 89.495489 74.553881 
L 88.896602 73.509843 
L 89.357493 72.410317 
L 88.14105 71.491027 
L 86.771275 71.255874 
L 86.111347 70.416214 
L 85.300735 68.758843 
L 83.852755 68.027792 
L 82.46769 68.061333 
L 82.727211 66.809698 
L 81.308487 66.823955 
L 81.142582 68.577052 
L 79.660352 72.353804 
L 79.749767 73.527071 
L 80.813836 73.574873 
L 81.457301 75.059076 
L 81.735318 76.472749 
L 82.646005 77.409391 
L 83.64526 77.598633 
L 84.497037 78.449975 
L 84.877204 78.603206 
L 85.852556 79.595984 
L 86.546445 80.699326 
L 86.639548 81.811179 
L 86.460877 82.563231 
L 86.622039 83.131965 
L 86.742426 84.111742 
L 87.329506 84.568118 
L 87.985163 86.033915 
L 87.9531 86.594647 
L 86.769001 86.705385 
L 85.191498 85.477295 
L 83.223923 84.16316 
L 83.032235 83.32002 
L 82.07729 82.214918 
L 81.857131 80.847948 
L 81.267054 79.950095 
L 81.459034 78.751728 
L 81.1021 78.055938 
L 80.458266 77.427714 
L 80.187438 76.617102 
L 78.549675 74.92513 
L 78.263684 75.884985 
L 77.970728 74.979717 
L 78.169441 73.963591 
L 78.682341 72.406114 
L 78.553631 71.207441 
L 79.081711 69.972454 
L 78.563462 69.026148 
L 78.743963 67.287434 
L 78.119464 66.468536 
L 77.667185 64.583031 
L 77.460736 62.60926 
L 76.83925 61.329772 
L 75.770099 62.114843 
L 73.933289 63.239356 
L 73.06456 63.108813 
L 72.1219 62.753668 
L 72.777888 60.830574 
L 72.554068 59.398705 
L 71.491499 57.662735 
L 71.720811 57.116794 
L 70.854058 56.93622 
L 69.901684 55.731413 
L 69.553151 54.963567 
L 69.545018 54.212171 
L 69.33991 53.509351 
L 68.823439 52.669747 
L 67.491461 52.637167 
L 67.550496 53.23574 
L 66.995793 54.060333 
L 66.412839 53.774803 
L 66.168692 54.046291 
L 65.235748 53.775005 
L 64.959516 54.315549 
L 63.98134 54.31833 
L 62.174251 54.664318 
L 62.101688 55.774121 
L 61.216531 56.671878 
L 59.02274 57.72703 
L 57.18724 59.53816 
L 55.992214 60.521091 
L 54.453379 61.553179 
L 54.356041 62.256925 
L 52.276609 63.233239 
L 51.618944 63.330711 
L 51.046993 64.516438 
L 51.008429 67.8229 
L 50.254945 69.327478 
L 49.988923 72.014947 
L 49.256203 72.104488 
L 48.514709 73.328109 
L 48.896363 73.846473 
L 47.590008 74.318919 
L 47.039371 75.412036 
L 46.452198 75.879796 
L 45.27907 74.410982 
L 44.519522 70.623345 
L 44.141926 69.891818 
L 43.632495 68.408505 
L 43.497139 65.521104 
L 42.683025 63.457026 
L 42.727292 58.657842 
L 43.124345 56.873013 
L 43.211081 55.517642 
L 41.279701 56.469455 
L 40.50264 56.334824 
L 39.471334 54.661615 
L 40.151909 54.114439 
L 39.976189 53.572753 
L 39.035079 52.445581 
L 38.354938 52.138452 
L 38.355508 51.153918 
L 37.897887 50.152772 
L 35.942139 50.544153 
L 34.346439 50.689048 
L 32.947848 50.987118 
L 29.685571 50.402625 
L 30.01346 48.786023 
L 29.728323 48.589333 
L 29.017197 48.892062 
L 27.959809 49.623811 
L 27.237281 49.283759 
L 26.96868 48.352076 
L 26.475512 48.061917 
L 26.622643 46.883799 
L 27.014945 45.237867 
L 26.567619 45.494687 
L 26.398789 45.132547 
L 25.909771 45.6642 
L 25.589996 45.657438 
L 24.604457 48.534252 
L 24.769314 48.790113 
L 24.661823 49.237583 
L 24.847165 49.734416 
L 24.268439 51.171372 
L 24.299107 51.524277 
L 24.166886 52.275697 
L 24.532915 51.297853 
L 25.017716 50.570742 
L 25.266379 50.403488 
L 25.293458 50.798203 
L 24.972834 51.585712 
L 24.494155 52.401131 
L 24.417518 52.905991 
L 24.56886 52.825315 
L 24.446763 53.19721 
L 25.091607 52.918826 
L 26.124092 52.881282 
L 29.201164 49.600788 
L 29.252134 49.707416 
L 28.743248 50.528533 
L 28.427326 51.592309 
L 28.437426 52.494252 
L 28.71814 52.952558 
L 29.700707 53.286739 
L 29.905268 54.499835 
L 30.169129 54.652347 
L 30.064264 54.96688 
L 29.193033 56.244884 
L 28.672999 56.728962 
L 28.041461 57.73264 
L 27.664088 57.688149 
L 27.37905 58.043435 
L 27.022841 58.781846 
L 26.720476 59.921749 
L 26.321503 59.946393 
L 25.63437 60.527134 
L 25.357427 61.24024 
L 25.080848 61.561364 
L 24.562977 61.588029 
L 24.14131 61.978388 
L 23.989859 62.566734 
L 23.489317 63.001087 
L 23.081288 62.896502 
L 22.425938 63.42852 
L 22.046503 63.538544 
L 21.395665 63.973185 
L 20.946587 65.133587 
L 20.064472 65.808144 
L 18.778511 66.579548 
L 17.939113 67.661911 
L 17.632417 67.765747 
L 17.458289 67.694723 
L 16.951831 68.333325 
L 16.495727 68.647978 
L 15.810429 68.862314 
L 15.261103 69.759325 
L 14.991399 69.750997 
L 14.774836 69.964929 
L 14.42058 69.923971 
L 14.468614 69.085438 
L 14.678127 67.87063 
L 15.08154 65.50544 
L 15.21622 65.221873 
L 15.470711 63.999873 
L 15.445615 63.590408 
L 15.574903 63.029376 
L 15.480963 62.556291 
L 15.604621 61.412229 
L 15.85372 60.292932 
L 15.881119 59.387146 
L 15.773124 59.19278 
L 15.983897 57.931902 
L 17.035837 54.736617 
L 17.237196 53.291613 
L 17.613807 52.329906 
L 17.654472 52.062811 
L 18.633727 49.306311 
L 18.488206 49.358696 
L 19.564122 47.504126 
L 18.020649 49.948149 
L 18.339466 49.041292 
L 19.172273 47.306182 
L 17.092553 51.874527 
L 15.686728 55.765052 
L 15.515559 57.143235 
L 14.944112 58.71804 
L 14.05219 61.748667 
L 14.121764 62.545359 
L 13.639864 66.079664 
L 13.960722 68.147317 
L 14.075914 69.4379 
L 14.23121 69.851747 
L 14.259181 70.292106 
L 14.119663 70.900773 
L 13.757761 71.276942 
L 14.018719 71.914803 
L 14.01097 72.51448 
L 14.145388 73.112972 
L 14.418379 73.097871 
L 15.021946 72.68116 
L 15.703548 72.460639 
L 16.334564 71.962785 
L 16.670682 71.843942 
L 16.953048 71.557611 
L 17.563675 71.437643 
L 18.320162 71.023273 
L 18.752776 70.492179 
L 19.0285 70.471065 
L 18.615763 72.54326 
L 18.373872 73.093557 
L 17.353123 76.430618 
L 15.897296 80.619287 
L 14.343585 84.414273 
L 12.287469 88.301093 
L 11.739905 90.1167 
L 11.541946 91.257769 
L 11.23029 91.848956 
L 11.140783 92.468939 
L 10.976749 92.574361 
L 10.842554 95.201068 
L 10.710141 95.683234 
L 10.683719 97.495009 
L 10.794964 98.332267 
L 11.119271 98.886284 
L 11.176895 99.270518 
L 11.255922 100.600532 
L 11.326563 101.300029 
L 12.682899 106.137955 
L 13.91575 111.396957 
L 13.994672 113.204259 
L 13.570387 114.292087 
L 13.726532 117.158563 
L 14.054472 118.128018 
L 15.11359 120.409915 
L 15.140711 120.356299 
L 16.336281 123.505515 
L 16.323418 124.487273 
L 16.447832 124.931158 
L 18.351185 128.774625 
L 18.895223 130.10089 
L 21.042132 134.132676 
L 21.042132 134.132676 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 122.538548 102.461023 
L 123.567918 102.394224 
L 124.037982 102.187751 
L 124.57682 102.380184 
L 124.012019 102.822231 
L 122.436801 103.544578 
L 121.167113 104.021147 
L 120.113657 105.230497 
L 118.808153 105.599106 
L 118.640963 105.409294 
L 118.812877 104.862761 
L 119.52249 103.875593 
L 121.041352 103.219436 
L 121.240105 102.837809 
L 122.538548 102.461023 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 62.030445 165.558356 
L 61.5537 165.279945 
L 61.949298 165.397262 
L 61.970248 165.290987 
L 61.958938 165.238849 
L 61.592053 165.016295 
L 61.830422 164.97299 
L 62.920276 165.194467 
L 67.319259 166.452466 
L 67.452835 166.417668 
L 67.419802 166.296224 
L 69.535526 166.713148 
L 69.973894 166.762832 
L 71.725593 167.434836 
L 71.562604 167.567743 
L 73.509801 168.174596 
L 74.287935 168.243593 
L 73.701076 167.683298 
L 75.096225 167.690678 
L 75.0652 167.575701 
L 74.962469 167.456745 
L 75.057797 167.348688 
L 76.868941 167.12815 
L 78.697277 167.069796 
L 78.702818 166.818002 
L 80.043126 167.230109 
L 82.263997 167.330914 
L 83.096894 167.340034 
L 83.586934 167.431237 
L 85.210161 167.362981 
L 85.834374 167.423069 
L 87.568313 166.777543 
L 88.45779 166.94909 
L 89.617281 167.323416 
L 91.388512 167.272147 
L 92.579538 167.096153 
L 93.044185 166.97178 
L 94.658423 166.911968 
L 95.215526 167.140676 
L 96.185196 167.190822 
L 97.449956 167.272206 
L 98.631653 167.076925 
L 99.691767 166.878493 
L 100.66222 166.913534 
L 101.759653 166.789771 
L 102.623041 166.804529 
L 104.449948 166.535131 
L 106.11245 166.332132 
L 107.059084 166.015206 
L 106.623208 166.484702 
L 106.895907 166.517653 
L 110.578032 166.08139 
L 110.579331 166.174815 
L 110.12802 166.425292 
L 110.799606 166.495748 
L 111.667885 166.42381 
L 112.240761 166.251218 
L 112.124351 166.387948 
L 112.131061 166.427567 
L 112.570608 166.368434 
L 112.276801 166.512608 
L 112.053738 166.600145 
L 112.880885 166.391179 
L 113.029752 166.347368 
L 113.029752 166.347368 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 54.5637 154.307699 
L 55.302712 154.638075 
L 56.145005 154.820553 
L 56.308166 154.990251 
L 56.411958 155.365625 
L 55.266529 155.304464 
L 54.851044 154.838154 
L 54.661217 154.485141 
L 54.5637 154.307699 
" style="fill:none;stroke:#000000;"/>
    <path clip-path="url(#p96d7315648)" d="M 36.79331 29.072673 
L 38.245032 27.948662 
L 38.879515 27.687138 
L 39.669435 27.067115 
L 40.345557 26.770664 
L 41.370082 26.235535 
L 41.604818 26.380737 
L 42.210486 26.234665 
L 41.74775 26.806826 
L 40.762354 27.773051 
L 40.394191 27.714569 
L 39.76962 27.960391 
L 39.084707 28.689439 
L 38.635499 28.694372 
L 38.357326 29.017227 
L 38.432869 29.215364 
L 37.887964 30.085042 
L 38.267537 30.318784 
L 38.0811 30.661907 
L 37.575364 31.123806 
L 37.401046 31.375456 
L 37.043915 32.033798 
L 37.725449 31.243834 
L 38.439908 30.893922 
L 38.139718 31.469739 
L 38.113198 32.03888 
L 37.281018 32.471894 
L 36.889498 32.301726 
L 36.053028 33.239279 
L 36.423636 33.236278 
L 35.703517 34.017158 
L 35.936342 34.315941 
L 35.015464 35.509577 
L 34.591683 36.300798 
L 34.34811 36.580181 
L 33.12005 37.041554 
L 32.364864 36.984431 
L 32.344681 36.477258 
L 31.960301 36.335793 
L 32.38314 35.532017 
L 32.778152 34.979084 
L 33.177904 34.680576 
L 33.567475 34.274213 
L 34.320668 33.40325 
L 34.857584 33.230583 
L 34.909806 32.96942 
L 34.686874 32.96692 
L 35.01845 32.256906 
L 35.197497 31.752143 
L 35.6893 30.635833 
L 36.35403 29.934505 
L 36.79331 29.072673 
" style="fill:none;stroke:#000000;"/>
   </g>
   <g id="LineCollection_1">
    <path clip-path="url(#p96d7315648)" d="M 136.582086 154.637933 
L 136.850551 154.443904 
L 138.545884 153.177562 
L 140.207866 151.86427 
L 141.835234 150.504939 
L 143.426753 149.100517 
L 144.98122 147.651989 
L 146.49746 146.160379 
L 147.974331 144.626744 
L 149.41072 143.052178 
L 150.805551 141.437806 
L 152.15778 139.784789 
L 153.466398 138.094316 
L 154.730429 136.36761 
L 155.948936 134.605922 
L 157.121017 132.810529 
L 158.245804 130.982739 
L 159.322471 129.123884 
L 160.350227 127.235321 
L 161.328317 125.31843 
L 162.256029 123.374616 
L 163.132686 121.405302 
L 163.957651 119.411933 
L 164.730326 117.395973 
L 165.450152 115.358903 
L 166.116609 113.302221 
L 166.729218 111.227439 
L 167.287538 109.136084 
L 167.791168 107.029697 
L 168.239749 104.909828 
L 168.63296 102.778039 
L 168.970519 100.635901 
L 169.252186 98.484993 
L 169.477761 96.326901 
L 169.647082 94.163214 
L 169.76003 91.995529 
L 169.816524 89.825443 
L 169.816524 87.654557 
L 169.76003 85.484471 
L 169.647082 83.316786 
L 169.477761 81.153099 
L 169.252186 78.995007 
L 168.970519 76.844099 
L 168.63296 74.701961 
L 168.239749 72.570172 
L 167.791168 70.450303 
L 167.287538 68.343916 
L 166.729218 66.252561 
L 166.116609 64.177779 
L 165.450152 62.121097 
L 164.730326 60.084027 
L 163.957651 58.068067 
L 163.132686 56.074698 
L 162.256029 54.105384 
L 161.328317 52.16157 
L 160.350227 50.244679 
L 159.322471 48.356116 
L 158.245804 46.497261 
L 157.121017 44.669471 
L 155.948936 42.874078 
L 154.730429 41.11239 
L 153.466398 39.385684 
L 152.15778 37.695211 
L 150.805551 36.042194 
L 149.41072 34.427822 
L 147.974331 32.853256 
L 146.49746 31.319621 
L 144.98122 29.828011 
L 143.426753 28.379483 
L 141.835234 26.975061 
L 140.207866 25.61573 
L 138.545884 24.302438 
L 136.850551 23.036096 
L 136.582086 22.842067 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 72.695106 168.355546 
L 71.166973 167.955702 
L 69.643273 167.497369 
L 68.125234 166.980425 
L 66.614095 166.404795 
L 65.111108 165.77046 
L 63.61753 165.077449 
L 62.134629 164.325849 
L 60.663678 163.515801 
L 59.205954 162.647502 
L 57.762736 161.721208 
L 56.335305 160.737233 
L 54.924942 159.69595 
L 53.532924 158.597795 
L 52.160524 157.443264 
L 50.809009 156.232914 
L 49.479639 154.967368 
L 48.173663 153.64731 
L 46.892319 152.273487 
L 45.63683 150.846713 
L 44.408406 149.367863 
L 43.208239 147.837877 
L 42.0375 146.25776 
L 40.897341 144.62858 
L 39.78889 142.951468 
L 38.713253 141.227618 
L 37.671506 139.458286 
L 36.664699 137.644789 
L 35.693853 135.788504 
L 34.759954 133.890868 
L 33.86396 131.953376 
L 33.00679 129.977576 
L 32.18933 127.965076 
L 31.412426 125.917532 
L 30.676886 123.836655 
L 29.983478 121.724202 
L 29.332928 119.581978 
L 28.725919 117.411834 
L 28.163092 115.215661 
L 27.645039 112.99539 
L 27.172311 110.752989 
L 26.745407 108.49046 
L 26.364782 106.209837 
L 26.030841 103.913181 
L 25.74394 101.602579 
L 25.504385 99.280138 
L 25.312433 96.947986 
L 25.168289 94.608264 
L 25.072107 92.263127 
L 25.023991 89.914737 
L 25.023991 87.565263 
L 25.072107 85.216873 
L 25.168289 82.871736 
L 25.312433 80.532014 
L 25.504385 78.199862 
L 25.74394 75.877421 
L 26.030841 73.566819 
L 26.364782 71.270163 
L 26.745407 68.98954 
L 27.172311 66.727011 
L 27.645039 64.48461 
L 28.163092 62.264339 
L 28.725919 60.068166 
L 29.332928 57.898022 
L 29.983478 55.755798 
L 30.676886 53.643345 
L 31.412426 51.562468 
L 32.18933 49.514924 
L 33.00679 47.502424 
L 33.86396 45.526624 
L 34.759954 43.589132 
L 35.693853 41.691496 
L 36.664699 39.835211 
L 37.671506 38.021714 
L 38.713253 36.252382 
L 39.78889 34.528532 
L 40.897341 32.85142 
L 42.0375 31.22224 
L 43.208239 29.642123 
L 44.408406 28.112137 
L 45.63683 26.633287 
L 46.892319 25.206513 
L 48.173663 23.83269 
L 49.479639 22.512632 
L 50.809009 21.247086 
L 52.160524 20.036736 
L 53.532924 18.882205 
L 54.924942 17.78405 
L 56.335305 16.742767 
L 57.762736 15.758792 
L 59.205954 14.832498 
L 60.663678 13.964199 
L 62.134629 13.154151 
L 63.61753 12.402551 
L 65.111108 11.70954 
L 66.614095 11.075205 
L 68.125234 10.499575 
L 69.643273 9.982631 
L 71.166973 9.524298 
L 72.695106 9.124454 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 94.826331 169.241499 
L 95.413276 168.925487 
L 95.99983 168.549841 
L 96.585519 168.114162 
L 97.169861 167.618096 
L 97.752366 167.061339 
L 98.332533 166.443641 
L 98.909857 165.764801 
L 99.483824 165.024678 
L 100.053915 164.223189 
L 100.619604 163.360311 
L 101.180359 162.436085 
L 101.735646 161.450618 
L 102.284925 160.404084 
L 102.827656 159.296728 
L 103.363294 158.128866 
L 103.891294 156.900889 
L 104.411111 155.613264 
L 104.9222 154.266536 
L 105.424017 152.86133 
L 105.916022 151.398349 
L 106.397679 149.878382 
L 106.868452 148.302299 
L 107.327817 146.671055 
L 107.775251 144.985691 
L 108.210243 143.247331 
L 108.632286 141.457188 
L 109.040887 139.616558 
L 109.435562 137.726824 
L 109.815839 135.789454 
L 110.181258 133.805999 
L 110.531374 131.778095 
L 110.865757 129.707457 
L 111.183993 127.595882 
L 111.485685 125.445243 
L 111.770453 123.257491 
L 112.037936 121.034647 
L 112.287793 118.778804 
L 112.519705 116.492119 
L 112.733372 114.176815 
L 112.928518 111.835172 
L 113.104888 109.469525 
L 113.262252 107.082261 
L 113.400403 104.675811 
L 113.51916 102.252648 
L 113.618365 99.815282 
L 113.697888 97.366253 
L 113.757623 94.908125 
L 113.79749 92.443484 
L 113.817437 89.97493 
L 113.817437 87.50507 
L 113.79749 85.036516 
L 113.757623 82.571875 
L 113.697888 80.113747 
L 113.618365 77.664718 
L 113.51916 75.227352 
L 113.400403 72.804189 
L 113.262252 70.397739 
L 113.104888 68.010475 
L 112.928518 65.644828 
L 112.733372 63.303185 
L 112.519705 60.987881 
L 112.287793 58.701196 
L 112.037936 56.445353 
L 111.770453 54.222509 
L 111.485685 52.034757 
L 111.183993 49.884118 
L 110.865757 47.772543 
L 110.531374 45.701905 
L 110.181258 43.674001 
L 109.815839 41.690546 
L 109.435562 39.753176 
L 109.040887 37.863442 
L 108.632286 36.022812 
L 108.210243 34.232669 
L 107.775251 32.494309 
L 107.327817 30.808945 
L 106.868452 29.177701 
L 106.397679 27.601618 
L 105.916022 26.081651 
L 105.424017 24.61867 
L 104.9222 23.213464 
L 104.411111 21.866736 
L 103.891294 20.579111 
L 103.363294 19.351134 
L 102.827656 18.183272 
L 102.284925 17.075916 
L 101.735646 16.029382 
L 101.180359 15.043915 
L 100.619604 14.119689 
L 100.053915 13.256811 
L 99.483824 12.455322 
L 98.909857 11.715199 
L 98.332533 11.036359 
L 97.752366 10.418661 
L 97.169861 9.861904 
L 96.585519 9.365838 
L 95.99983 8.930159 
L 95.413276 8.554513 
L 94.826331 8.238501 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 136.582086 154.637933 
L 136.850551 154.443904 
L 138.545884 153.177562 
L 140.207866 151.86427 
L 141.835234 150.504939 
L 143.426753 149.100517 
L 144.98122 147.651989 
L 146.49746 146.160379 
L 147.974331 144.626744 
L 149.41072 143.052178 
L 150.805551 141.437806 
L 152.15778 139.784789 
L 153.466398 138.094316 
L 154.730429 136.36761 
L 155.948936 134.605922 
L 157.121017 132.810529 
L 158.245804 130.982739 
L 159.322471 129.123884 
L 160.350227 127.235321 
L 161.328317 125.31843 
L 162.256029 123.374616 
L 163.132686 121.405302 
L 163.957651 119.411933 
L 164.730326 117.395973 
L 165.450152 115.358903 
L 166.116609 113.302221 
L 166.729218 111.227439 
L 167.287538 109.136084 
L 167.791168 107.029697 
L 168.239749 104.909828 
L 168.63296 102.778039 
L 168.970519 100.635901 
L 169.252186 98.484993 
L 169.477761 96.326901 
L 169.647082 94.163214 
L 169.76003 91.995529 
L 169.816524 89.825443 
L 169.816524 87.654557 
L 169.76003 85.484471 
L 169.647082 83.316786 
L 169.477761 81.153099 
L 169.252186 78.995007 
L 168.970519 76.844099 
L 168.63296 74.701961 
L 168.239749 72.570172 
L 167.791168 70.450303 
L 167.287538 68.343916 
L 166.729218 66.252561 
L 166.116609 64.177779 
L 165.450152 62.121097 
L 164.730326 60.084027 
L 163.957651 58.068067 
L 163.132686 56.074698 
L 162.256029 54.105384 
L 161.328317 52.16157 
L 160.350227 50.244679 
L 159.322471 48.356116 
L 158.245804 46.497261 
L 157.121017 44.669471 
L 155.948936 42.874078 
L 154.730429 41.11239 
L 153.466398 39.385684 
L 152.15778 37.695211 
L 150.805551 36.042194 
L 149.41072 34.427822 
L 147.974331 32.853256 
L 146.49746 31.319621 
L 144.98122 29.828011 
L 143.426753 28.379483 
L 141.835234 26.975061 
L 140.207866 25.61573 
L 138.545884 24.302438 
L 136.850551 23.036096 
L 136.582086 22.842067 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
   </g>
   <g id="LineCollection_2">
    <path clip-path="url(#p96d7315648)" d="M 49.087498 159.817944 
L 49.499883 160.027017 
L 50.297796 160.359719 
L 51.263008 160.687881 
L 52.393599 161.00988 
L 53.686775 161.324061 
L 55.138835 161.628752 
L 56.745154 161.922272 
L 58.500167 162.202951 
L 60.397367 162.469139 
L 62.429312 162.719224 
L 64.587641 162.951653 
L 66.863104 163.164943 
L 69.245598 163.357704 
L 71.724224 163.528651 
L 74.287348 163.676625 
L 76.922677 163.800606 
L 79.617344 163.899728 
L 82.358004 163.973292 
L 85.130936 164.020772 
L 87.922153 164.041829 
L 90.717517 164.036312 
L 93.502856 164.00426 
L 96.26408 163.945903 
L 98.987299 163.861659 
L 101.658936 163.752125 
L 104.265831 163.618073 
L 106.795345 163.460433 
L 109.235448 163.280285 
L 111.574802 163.078843 
L 113.802833 162.857435 
L 115.909786 162.617495 
L 117.886775 162.360535 
L 119.725817 162.088135 
L 121.419858 161.801925 
L 122.962781 161.503565 
L 124.349412 161.194732 
L 125.575513 160.877104 
L 126.637759 160.552348 
L 127.533726 160.222107 
L 128.261849 159.887988 
L 128.392502 159.817944 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 26.503911 141.365264 
L 26.626581 141.493356 
L 27.174594 141.886214 
L 27.9867 142.280553 
L 29.065306 142.674565 
L 30.411552 143.066327 
L 32.025197 143.453804 
L 33.904504 143.834859 
L 36.046136 144.20727 
L 38.445054 144.568742 
L 41.094441 144.916932 
L 43.985628 145.249468 
L 47.108059 145.563981 
L 50.449266 145.858131 
L 53.994879 146.129644 
L 57.728671 146.376342 
L 61.632633 146.596183 
L 65.687078 146.787293 
L 69.870794 146.948001 
L 74.161217 147.076873 
L 78.534643 147.172739 
L 82.966464 147.234715 
L 87.431429 147.262227 
L 91.903917 147.255017 
L 96.358222 147.213153 
L 100.768844 147.137024 
L 105.110765 147.027337 
L 109.359721 146.885095 
L 113.492456 146.711582 
L 117.486942 146.508334 
L 121.322579 146.277109 
L 124.980364 146.019856 
L 128.443013 145.738678 
L 131.695063 145.435797 
L 134.722932 145.113518 
L 137.514945 144.774197 
L 140.061332 144.420208 
L 142.354201 144.053914 
L 144.38748 143.677641 
L 146.156849 143.293656 
L 147.659646 142.904147 
L 148.894769 142.51121 
L 149.862563 142.116835 
L 150.56471 141.722899 
L 150.976089 141.365264 
L 150.976089 141.365263 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 12.27811 116.860121 
L 12.351019 116.9143 
L 12.893474 117.174551 
L 13.762741 117.437188 
L 14.964138 117.701037 
L 16.50148 117.964819 
L 18.376882 118.227152 
L 20.590571 118.486552 
L 23.140687 118.741445 
L 26.023105 118.990176 
L 29.231262 119.231018 
L 32.756008 119.462196 
L 36.585488 119.681905 
L 40.705062 119.888336 
L 45.097262 120.079702 
L 49.741812 120.25427 
L 54.615696 120.410394 
L 59.693289 120.546548 
L 64.946559 120.661358 
L 70.34532 120.753633 
L 75.857552 120.822397 
L 81.449774 120.866907 
L 87.087453 120.88668 
L 92.735456 120.881497 
L 98.358512 120.851417 
L 103.921679 120.796767 
L 109.390811 120.718142 
L 114.732982 120.616384 
L 119.916894 120.49256 
L 124.913218 120.347942 
L 129.694893 120.183971 
L 134.237357 120.002226 
L 138.518719 119.804394 
L 142.519862 119.592234 
L 146.224494 119.367545 
L 149.619137 119.132139 
L 152.693072 118.88781 
L 155.438238 118.636316 
L 157.849104 118.379356 
L 159.922506 118.118552 
L 161.657473 117.855444 
L 163.055039 117.591472 
L 164.118049 117.327977 
L 164.850964 117.066193 
L 165.20189 116.860121 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 7.2 88.74 
L 7.200659 88.74 
L 7.388919 88.74 
L 7.91776 88.74 
L 8.795087 88.74 
L 10.027445 88.74 
L 11.619815 88.74 
L 13.575383 88.74 
L 15.895318 88.74 
L 18.578541 88.74 
L 21.621502 88.74 
L 25.017975 88.74 
L 28.758865 88.74 
L 32.832058 88.74 
L 37.2223 88.74 
L 41.91114 88.74 
L 46.876921 88.74 
L 52.094844 88.74 
L 57.537107 88.74 
L 63.173117 88.74 
L 68.969781 88.74 
L 74.891865 88.74 
L 80.902427 88.74 
L 86.963294 88.74 
L 93.035589 88.74 
L 99.08027 88.74 
L 105.058689 88.74 
L 110.93312 88.74 
L 116.667276 88.74 
L 122.226762 88.74 
L 127.579484 88.74 
L 132.695975 88.74 
L 137.549658 88.74 
L 142.117026 88.74 
L 146.377748 88.74 
L 150.314705 88.74 
L 153.913957 88.74 
L 157.164659 88.74 
L 160.058926 88.74 
L 162.591669 88.74 
L 164.760389 88.74 
L 166.564967 88.74 
L 168.007437 88.74 
L 169.091759 88.74 
L 169.823587 88.74 
L 170.210057 88.74 
L 170.28 88.74 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 12.27811 60.619879 
L 12.351019 60.5657 
L 12.893474 60.305449 
L 13.762741 60.042812 
L 14.964138 59.778963 
L 16.50148 59.515181 
L 18.376882 59.252848 
L 20.590571 58.993448 
L 23.140687 58.738555 
L 26.023105 58.489824 
L 29.231262 58.248982 
L 32.756008 58.017804 
L 36.585488 57.798095 
L 40.705062 57.591664 
L 45.097262 57.400298 
L 49.741812 57.22573 
L 54.615696 57.069606 
L 59.693289 56.933452 
L 64.946559 56.818642 
L 70.34532 56.726367 
L 75.857552 56.657603 
L 81.449774 56.613093 
L 87.087453 56.59332 
L 92.735456 56.598503 
L 98.358512 56.628583 
L 103.921679 56.683233 
L 109.390811 56.761858 
L 114.732982 56.863616 
L 119.916894 56.98744 
L 124.913218 57.132058 
L 129.694893 57.296029 
L 134.237357 57.477774 
L 138.518719 57.675606 
L 142.519862 57.887766 
L 146.224494 58.112455 
L 149.619137 58.347861 
L 152.693072 58.59219 
L 155.438238 58.843684 
L 157.849104 59.100644 
L 159.922506 59.361448 
L 161.657473 59.624556 
L 163.055039 59.888528 
L 164.118049 60.152023 
L 164.850964 60.413807 
L 165.20189 60.619879 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 26.503911 36.114736 
L 26.626581 35.986644 
L 27.174594 35.593786 
L 27.9867 35.199447 
L 29.065306 34.805435 
L 30.411552 34.413673 
L 32.025197 34.026196 
L 33.904504 33.645141 
L 36.046136 33.27273 
L 38.445054 32.911258 
L 41.094441 32.563068 
L 43.985628 32.230532 
L 47.108059 31.916019 
L 50.449266 31.621869 
L 53.994879 31.350356 
L 57.728671 31.103658 
L 61.632633 30.883817 
L 65.687078 30.692707 
L 69.870794 30.531999 
L 74.161217 30.403127 
L 78.534643 30.307261 
L 82.966464 30.245285 
L 87.431429 30.217773 
L 91.903917 30.224983 
L 96.358222 30.266847 
L 100.768844 30.342976 
L 105.110765 30.452663 
L 109.359721 30.594905 
L 113.492456 30.768418 
L 117.486942 30.971666 
L 121.322579 31.202891 
L 124.980364 31.460144 
L 128.443013 31.741322 
L 131.695063 32.044203 
L 134.722932 32.366482 
L 137.514945 32.705803 
L 140.061332 33.059792 
L 142.354201 33.426086 
L 144.38748 33.802359 
L 146.156849 34.186344 
L 147.659646 34.575853 
L 148.894769 34.96879 
L 149.862563 35.363165 
L 150.56471 35.757101 
L 150.976089 36.114736 
L 150.976089 36.114737 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
    <path clip-path="url(#p96d7315648)" d="M 49.087498 17.662056 
L 49.499883 17.452983 
L 50.297796 17.120281 
L 51.263008 16.792119 
L 52.393599 16.47012 
L 53.686775 16.155939 
L 55.138835 15.851248 
L 56.745154 15.557728 
L 58.500167 15.277049 
L 60.397367 15.010861 
L 62.429312 14.760776 
L 64.587641 14.528347 
L 66.863104 14.315057 
L 69.245598 14.122296 
L 71.724224 13.951349 
L 74.287348 13.803375 
L 76.922677 13.679394 
L 79.617344 13.580272 
L 82.358004 13.506708 
L 85.130936 13.459228 
L 87.922153 13.438171 
L 90.717517 13.443688 
L 93.502856 13.47574 
L 96.26408 13.534097 
L 98.987299 13.618341 
L 101.658936 13.727875 
L 104.265831 13.861927 
L 106.795345 14.019567 
L 109.235448 14.199715 
L 111.574802 14.401157 
L 113.802833 14.622565 
L 115.909786 14.862505 
L 117.886775 15.119465 
L 119.725817 15.391865 
L 121.419858 15.678075 
L 122.962781 15.976435 
L 124.349412 16.285268 
L 125.575513 16.602896 
L 126.637759 16.927652 
L 127.533726 17.257893 
L 128.261849 17.592012 
L 128.392502 17.662056 
" style="fill:none;stroke:#b0b0b0;stroke-width:0.8;"/>
   </g>
   <g id="patch_3">
    <path d="M 170.28 88.74 
L 169.840105 97.230838 
L 168.524589 105.630733 
L 166.345964 113.84954 
L 163.325137 121.798715 
L 159.491448 129.392142 
L 154.882713 136.546979 
L 149.545206 143.184529 
L 143.533562 149.231125 
L 136.910559 154.619028 
L 129.746743 159.28731 
L 122.119858 163.182707 
L 114.114085 166.260409 
L 105.819067 168.484768 
L 97.328739 169.829874 
L 88.74 170.28 
L 80.151261 169.829874 
L 71.660933 168.484768 
L 63.365915 166.260409 
L 55.360142 163.182707 
L 47.733257 159.28731 
L 40.569441 154.619028 
L 33.946438 149.231125 
L 27.934794 143.184529 
L 22.597287 136.546979 
L 17.988552 129.392142 
L 14.154863 121.798715 
L 11.134036 113.84954 
L 8.955411 105.630733 
L 7.639895 97.230838 
L 7.2 88.74 
L 7.639895 80.249162 
L 8.955411 71.849267 
L 11.134036 63.63046 
L 14.154863 55.681285 
L 17.988552 48.087858 
L 22.597287 40.933021 
L 27.934794 34.295471 
L 33.946438 28.248875 
L 40.569441 22.860972 
L 47.733257 18.19269 
L 55.360142 14.297293 
L 63.365915 11.219591 
L 71.660933 8.995232 
L 80.151261 7.650126 
L 88.74 7.2 
L 97.328739 7.650126 
L 105.819067 8.995232 
L 114.114085 11.219591 
L 122.119858 14.297293 
L 129.746743 18.19269 
L 136.910559 22.860972 
L 143.533562 28.248875 
L 149.545206 34.295471 
L 154.882713 40.933021 
L 159.491448 48.087858 
L 163.325137 55.681285 
L 166.345964 63.63046 
L 168.524589 71.849267 
L 169.840105 80.249162 
L 170.28 88.74 
L 170.28 88.74 
" style="fill:none;stroke:#000000;stroke-linejoin:miter;stroke-width:0.8;"/>
   </g>
  </g>
 </g>
 <defs>
  <clipPath id="p96d7315648">
   <path d="M 170.28 88.74 
L 169.840105 97.230838 
L 168.524589 105.630733 
L 166.345964 113.84954 
L 163.325137 121.798715 
L 159.491448 129.392142 
L 154.882713 136.546979 
L 149.545206 143.184529 
L 143.533562 149.231125 
L 136.910559 154.619028 
L 129.746743 159.28731 
L 122.119858 163.182707 
L 114.114085 166.260409 
L 105.819067 168.484768 
L 97.328739 169.829874 
L 88.74 170.28 
L 80.151261 169.829874 
L 71.660933 168.484768 
L 63.365915 166.260409 
L 55.360142 163.182707 
L 47.733257 159.28731 
L 40.569441 154.619028 
L 33.946438 149.231125 
L 27.934794 143.184529 
L 22.597287 136.546979 
L 17.988552 129.392142 
L 14.154863 121.798715 
L 11.134036 113.84954 
L 8.955411 105.630733 
L 7.639895 97.230838 
L 7.2 88.74 
L 7.639895 80.249162 
L 8.955411 71.849267 
L 11.134036 63.63046 
L 14.154863 55.681285 
L 17.988552 48.087858 
L 22.597287 40.933021 
L 27.934794 34.295471 
L 33.946438 28.248875 
L 40.569441 22.860972 
L 47.733257 18.19269 
L 55.360142 14.297293 
L 63.365915 11.219591 
L 71.660933 8.995232 
L 80.151261 7.650126 
L 88.74 7.2 
L 97.328739 7.650126 
L 105.819067 8.995232 
L 114.114085 11.219591 
L 122.119858 14.297293 
L 129.746743 18.19269 
L 136.910559 22.860972 
L 143.533562 28.248875 
L 149.545206 34.295471 
L 154.882713 40.933021 
L 159.491448 48.087858 
L 163.325137 55.681285 
L 166.345964 63.63046 
L 168.524589 71.849267 
L 169.840105 80.249162 
L 170.28 88.74 
L 170.28 88.74 
"/>
  </clipPath>
 </defs>
</svg>
<pre>&lt;cartopy.crs.Geostationary object at 0x7f990f77f1d0&gt;</pre></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">img_fname</span> <span class="o">=</span> <span class="s1">&#39;FY4A_201908070800_composite_true_color.png&#39;</span>
<span class="n">img_extent</span> <span class="o">=</span> <span class="n">fy_proj</span><span class="o">.</span><span class="n">x_limits</span> <span class="o">+</span> <span class="n">fy_proj</span><span class="o">.</span><span class="n">y_limits</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">img_fname</span><span class="p">)</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">fy_proj</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">fy_proj</span><span class="p">,</span><span class="n">extent</span><span class="o">=</span><span class="n">img_extent</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.image.AxesImage at 0x7f990fc56ad0&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_59_1.png" src="../_images/Cartopy_1_59_1.png" />
</div>
</div>
<p>我们可以将此图像投影到其它地图中。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Miller</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mf">105.</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_global</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>

<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">fy_proj</span><span class="p">,</span><span class="n">extent</span><span class="o">=</span><span class="n">img_extent</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>我们放大“双台共舞”的区域来看看 2019-09 超强台风利奇马 和 2019-10 强台风罗莎:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">105</span><span class="p">,</span><span class="mi">160</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">40</span><span class="p">])</span>
<span class="n">grid_lines</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">xlabels_top</span> <span class="o">=</span> <span class="n">grid_lines</span><span class="o">.</span><span class="n">ylabels_right</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">xformatter</span> <span class="o">=</span> <span class="n">LONGITUDE_FORMATTER</span>
<span class="n">grid_lines</span><span class="o">.</span><span class="n">yformatter</span> <span class="o">=</span> <span class="n">LATITUDE_FORMATTER</span>
<span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="n">fy_proj</span><span class="p">,</span><span class="n">extent</span><span class="o">=</span><span class="n">img_extent</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/miniconda3/lib/python3.7/site-packages/cartopy/mpl/gridliner.py:307: UserWarning: The .xlabels_top attribute is deprecated. Please use .top_labels to toggle visibility instead.
  warnings.warn(&#39;The .xlabels_top attribute is deprecated. Please &#39;
/opt/miniconda3/lib/python3.7/site-packages/cartopy/mpl/gridliner.py:343: UserWarning: The .ylabels_right attribute is deprecated. Please use .right_labels to toggle visibility instead.
  warnings.warn(&#39;The .ylabels_right attribute is deprecated. Please &#39;
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.image.AxesImage at 0x7fcec1d8b390&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_63_2.png" src="../_images/Cartopy_1_63_2.png" />
</div>
</div>
<p>我们看看用 <code class="docutils literal notranslate"><span class="pre">SatPy</span></code> 直接画出来的利奇马：
（参考 https://nbviewer.jupyter.org/github/pytroll/pytroll-examples/blob/master/satpy/FY4A_agri_introduction(zh-CN).ipynb)</p>
<p><img alt="" src="../_images/FY4A_201908070800_resampled_lekima.tif" /></p>
</div>
</div>
<div class="section" id="shapefile">
<h2>Shapefile<a class="headerlink" href="#shapefile" title="Permalink to this headline">¶</a></h2>
<p>shapefile 文件格式:</p>
<ul class="simple">
<li><p>是数字向量存储格式，用来存储几何形状、位置及相关的信息</p></li>
<li><p>shapefile 里存储的地理信息可以用点、线或者多边形（面积）来表示</p></li>
<li><p>非拓扑性（topological），即它并不保存相对空间位置信息，例如连接性、相邻性或者面积</p></li>
<li><p>最早由 ArcView GIS version 2 于 1990 年代早期引入.</p></li>
</ul>
<p>每个 shapefile 包括至少 3 个文件:</p>
<ul class="simple">
<li><p>.shp: 主文件，包括主要地理数据以及各个形状的记录</p></li>
<li><p>.dbf: dBase 数据库文件，存储着每个形状的属性. 它可以让访问空间特性数据变得更快。</p></li>
<li><p>.shx: 将 shapefile 的记录组织起来，以供参考.</p></li>
</ul>
<div class="section" id="id6">
<h3>例子: 单独显示某个国家<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cartopy.io.shapereader</span> <span class="k">as</span> <span class="nn">shapereader</span>
 
<span class="n">shpfilename</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">natural_earth</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;110m&#39;</span><span class="p">,</span> \
                                      <span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span> \
                                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_0_countries&#39;</span><span class="p">)</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shpfilename</span><span class="p">)</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">records</span><span class="p">()</span>

<span class="c1"># Select the map projection</span>
<span class="c1">#----------------------</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
 
<span class="c1"># Select the area of interest</span>
<span class="c1">#-----------------------</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="o">-</span><span class="mi">170</span><span class="p">,</span> <span class="o">-</span><span class="mi">65</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">70</span><span class="p">])</span>
 
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">c</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;USA&#39;</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> \
                          <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> \
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> \
                          <span class="n">label</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1">#print(type(c.geometry))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">c</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> \
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> \
                          <span class="n">label</span><span class="o">=</span><span class="n">c</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_69_0.png" src="../_images/Cartopy_1_69_0.png" />
</div>
</div>
</div>
<div class="section" id="id7">
<h3>例子：显示多个国家和地区<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#import cartopy.feature as cfeat</span>

<span class="k">def</span> <span class="nf">area</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">iso</span><span class="p">,</span> <span class="n">clr</span><span class="p">)</span> <span class="p">:</span>
    <span class="n">shp</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">natural_earth</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;110m&#39;</span><span class="p">,</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span>
                                  <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_0_countries&#39;</span><span class="p">)</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">reader</span><span class="o">.</span><span class="n">records</span><span class="p">()</span> <span class="p">:</span>
        <span class="k">if</span> <span class="n">n</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">iso</span><span class="p">:</span> 
            <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">n</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">facecolor</span><span class="o">=</span><span class="n">clr</span><span class="p">,</span> 
                              <span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.00</span><span class="p">,</span> <span class="n">linewidth</span> <span class="o">=</span><span class="mf">0.15</span><span class="p">,</span> <span class="n">edgecolor</span> <span class="o">=</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
                              <span class="n">label</span><span class="o">=</span><span class="n">n</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span> 
    <span class="k">return</span> <span class="n">ax</span>

<span class="n">iso3</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;USA&#39;</span><span class="p">,</span><span class="s1">&#39;CAN&#39;</span><span class="p">,</span><span class="s1">&#39;RUS&#39;</span><span class="p">,</span><span class="s1">&#39;GBR&#39;</span><span class="p">,</span><span class="s1">&#39;ISL&#39;</span><span class="p">,</span><span class="s1">&#39;FRA&#39;</span><span class="p">,</span><span class="s1">&#39;ITA&#39;</span><span class="p">,</span><span class="s1">&#39;CHN&#39;</span><span class="p">,</span><span class="s1">&#39;TWN&#39;</span><span class="p">,</span><span class="s1">&#39;AUT&#39;</span><span class="p">]</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Miller</span><span class="p">())</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">COASTLINE</span><span class="p">)</span>
<span class="c1">#ax.coastlines()</span>

<span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">iso3</span> <span class="p">:</span>
    <span class="n">area</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/Cartopy_1_71_0.png" src="../_images/Cartopy_1_71_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="id8">
<h2>中国地图<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>中国地图常见的错误
<img alt="" src="../_images/China_map_problems.jpg" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># import cartopy.io.shapereader as shapereader</span>
<span class="n">shpfilename</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">natural_earth</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;110m&#39;</span><span class="p">,</span> \
                                      <span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span> \
                                      <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_0_countries&#39;</span><span class="p">)</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shpfilename</span><span class="p">)</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">records</span><span class="p">()</span>

<span class="c1"># Select the map projection</span>
<span class="c1">#----------------------</span>
<span class="c1">#ax = plt.axes(projection=ccrs.Mercator())</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">105</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
                             <span class="n">false_easting</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">false_northing</span><span class="o">=</span><span class="mi">400000</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
 
<span class="c1"># Select the area of interest</span>
<span class="c1">#-----------------------</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">70</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">55</span><span class="p">])</span>
 
<span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;CHN&#39;</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">country</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> \
                          <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> \
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">label</span><span class="o">=</span><span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">country</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> \
                          <span class="n">label</span><span class="o">=</span><span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
        
<span class="c1"># China</span>
<span class="n">shp</span> <span class="o">=</span> <span class="s1">&#39;../shp_file/china_country.shp&#39;</span>
<span class="n">rd</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
<span class="n">china</span> <span class="o">=</span> <span class="n">cfeat</span><span class="o">.</span><span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">geometries</span><span class="p">(),</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">china</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.gridliner.Gridliner at 0x7fcea7565190&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_74_1.png" src="../_images/Cartopy_1_74_1.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">states_provinces</span> <span class="o">=</span> <span class="n">cfeat</span><span class="o">.</span><span class="n">NaturalEarthFeature</span><span class="p">(</span><span class="n">category</span><span class="o">=</span><span class="s1">&#39;cultural&#39;</span><span class="p">,</span>
                                                <span class="n">name</span><span class="o">=</span><span class="s1">&#39;admin_1_states_provinces&#39;</span><span class="p">,</span>
                                                <span class="n">scale</span><span class="o">=</span><span class="s1">&#39;10m&#39;</span><span class="p">,</span> <span class="c1"># 注意：需要较长时间下载数据</span>
                                                <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>

<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">105</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
                             <span class="n">false_easting</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">false_northing</span><span class="o">=</span><span class="mi">400000</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
 
<span class="c1"># Select the area of interest</span>
<span class="c1">#-----------------------</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">70</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">55</span><span class="p">])</span>

<span class="n">reader</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shpfilename</span><span class="p">)</span>
<span class="n">countries</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">records</span><span class="p">()</span>
<span class="k">for</span> <span class="n">country</span> <span class="ow">in</span> <span class="n">countries</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;CHN&#39;</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">country</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> \
                          <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> \
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                          <span class="n">label</span><span class="o">=</span><span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">add_geometries</span><span class="p">([</span><span class="n">country</span><span class="o">.</span><span class="n">geometry</span><span class="p">],</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span>
                          <span class="n">facecolor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> \
                          <span class="n">label</span><span class="o">=</span><span class="n">country</span><span class="o">.</span><span class="n">attributes</span><span class="p">[</span><span class="s1">&#39;ADM0_A3&#39;</span><span class="p">])</span>
        
<span class="c1"># China provinces </span>
<span class="n">shp</span> <span class="o">=</span> <span class="s1">&#39;../shp_file/china.shp&#39;</span>
<span class="n">rd</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
<span class="n">provinces</span> <span class="o">=</span> <span class="n">cfeat</span><span class="o">.</span><span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">geometries</span><span class="p">(),</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">provinces</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">states_provinces</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.gridliner.Gridliner at 0x7fcea8185390&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_75_1.png" src="../_images/Cartopy_1_75_1.png" />
</div>
</div>
<div class="section" id="lambertconformal">
<h3>LambertConformal 坐标标注<a class="headerlink" href="#lambertconformal" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>由于 <code class="docutils literal notranslate"><span class="pre">cartopy</span></code> 的局限，对于 <code class="docutils literal notranslate"><span class="pre">LambertConformal</span></code> 投影还无法标注坐标轴 (version &lt;= 0.17)。</p></li>
<li><p>这个问题在即将发布的 0.18 版本可望得到解决</p></li>
<li><p>Andrew Dawson 提供了一种临时解决方法 https://gist.github.com/ajdawson/dd536f786741e987ae4e</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">copy</span>
<span class="kn">import</span> <span class="nn">shapely.geometry</span> <span class="k">as</span> <span class="nn">sgeom</span>

<span class="k">def</span> <span class="nf">find_side</span><span class="p">(</span><span class="n">ls</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a shapely LineString which is assumed to be rectangular, return the</span>
<span class="sd">    line corresponding to a given side of the rectangle.</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">,</span> <span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span> <span class="o">=</span> <span class="n">ls</span><span class="o">.</span><span class="n">bounds</span>
    <span class="n">points</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">),</span> <span class="p">(</span><span class="n">minx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)],</span>
              <span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">maxx</span><span class="p">,</span> <span class="n">miny</span><span class="p">),</span> <span class="p">(</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)],</span>
              <span class="s1">&#39;bottom&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">minx</span><span class="p">,</span> <span class="n">miny</span><span class="p">),</span> <span class="p">(</span><span class="n">maxx</span><span class="p">,</span> <span class="n">miny</span><span class="p">)],</span>
              <span class="s1">&#39;top&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="n">minx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">),</span> <span class="p">(</span><span class="n">maxx</span><span class="p">,</span> <span class="n">maxy</span><span class="p">)],}</span>
    <span class="k">return</span> <span class="n">sgeom</span><span class="o">.</span><span class="n">LineString</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">side</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">lambert_xticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draw ticks on the bottom x-axis of a Lambert Conformal projection.&quot;&quot;&quot;</span>
    <span class="n">te</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">xy</span><span class="p">:</span> <span class="n">xy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">lc</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">t</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">n</span><span class="p">)))</span><span class="o">.</span><span class="n">T</span>
    <span class="n">xticks</span><span class="p">,</span> <span class="n">xticklabels</span> <span class="o">=</span> <span class="n">_lambert_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="s1">&#39;bottom&#39;</span><span class="p">,</span> <span class="n">lc</span><span class="p">,</span> <span class="n">te</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">tick_bottom</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">xticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()(</span><span class="n">xtick</span><span class="p">)</span> <span class="k">for</span> <span class="n">xtick</span> <span class="ow">in</span> <span class="n">xticklabels</span><span class="p">])</span>
    
<span class="k">def</span> <span class="nf">lambert_yticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Draw ricks on the left y-axis of a Lamber Conformal projection.&quot;&quot;&quot;</span>
    <span class="n">te</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">xy</span><span class="p">:</span> <span class="n">xy</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">lc</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">t</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">b</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">n</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">n</span><span class="p">)</span> <span class="o">+</span> <span class="n">t</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
    <span class="n">yticks</span><span class="p">,</span> <span class="n">yticklabels</span> <span class="o">=</span> <span class="n">_lambert_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">lc</span><span class="p">,</span> <span class="n">te</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">tick_left</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticks</span><span class="p">(</span><span class="n">yticks</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([</span><span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">get_major_formatter</span><span class="p">()(</span><span class="n">ytick</span><span class="p">)</span> <span class="k">for</span> <span class="n">ytick</span> <span class="ow">in</span> <span class="n">yticklabels</span><span class="p">])</span>

<span class="k">def</span> <span class="nf">_lambert_ticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">ticks</span><span class="p">,</span> <span class="n">tick_location</span><span class="p">,</span> <span class="n">line_constructor</span><span class="p">,</span> <span class="n">tick_extractor</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the tick locations and labels for an axis of a Lambert Conformal projection.&quot;&quot;&quot;</span>
    <span class="n">outline_patch</span> <span class="o">=</span> <span class="n">sgeom</span><span class="o">.</span><span class="n">LineString</span><span class="p">(</span><span class="n">ax</span><span class="o">.</span><span class="n">outline_patch</span><span class="o">.</span><span class="n">get_path</span><span class="p">()</span><span class="o">.</span><span class="n">vertices</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
    <span class="n">axis</span> <span class="o">=</span> <span class="n">find_side</span><span class="p">(</span><span class="n">outline_patch</span><span class="p">,</span> <span class="n">tick_location</span><span class="p">)</span>
    <span class="n">n_steps</span> <span class="o">=</span> <span class="mi">30</span>
    <span class="n">extent</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">get_extent</span><span class="p">(</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
    <span class="n">_ticks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">ticks</span><span class="p">:</span>
        <span class="n">xy</span> <span class="o">=</span> <span class="n">line_constructor</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">n_steps</span><span class="p">,</span> <span class="n">extent</span><span class="p">)</span>
        <span class="n">proj_xyz</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">projection</span><span class="o">.</span><span class="n">transform_points</span><span class="p">(</span><span class="n">ccrs</span><span class="o">.</span><span class="n">Geodetic</span><span class="p">(),</span> <span class="n">xy</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">xy</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">])</span>
        <span class="n">xyt</span> <span class="o">=</span> <span class="n">proj_xyz</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="p">:</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">ls</span> <span class="o">=</span> <span class="n">sgeom</span><span class="o">.</span><span class="n">LineString</span><span class="p">(</span><span class="n">xyt</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>
        <span class="n">locs</span> <span class="o">=</span> <span class="n">axis</span><span class="o">.</span><span class="n">intersection</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">locs</span><span class="p">:</span>
            <span class="n">tick</span> <span class="o">=</span> <span class="p">[</span><span class="kc">None</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tick</span> <span class="o">=</span> <span class="n">tick_extractor</span><span class="p">(</span><span class="n">locs</span><span class="o">.</span><span class="n">xy</span><span class="p">)</span>
        <span class="n">_ticks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">tick</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># Remove ticks that aren&#39;t visible:    </span>
    <span class="n">ticklabels</span> <span class="o">=</span> <span class="n">copy</span><span class="p">(</span><span class="n">ticks</span><span class="p">)</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">_ticks</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">_ticks</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
        <span class="n">ticklabels</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">_ticks</span><span class="p">,</span> <span class="n">ticklabels</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.08</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.94</span><span class="p">],</span> 
                  <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">105</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mi">90</span><span class="p">,</span>
                             <span class="n">false_easting</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">false_northing</span><span class="o">=</span><span class="mi">400000</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
 
<span class="c1"># Select the area of interest</span>
<span class="c1">#-----------------------</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">78</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">53</span><span class="p">])</span>

<span class="c1"># *must* call draw in order to get the axis boundary used to add ticks:</span>
<span class="n">fig</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="c1"># Define gridline locations and draw the lines using cartopy&#39;s built-in gridliner:</span>
<span class="n">xticks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">70</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>
<span class="n">yticks</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">60</span><span class="p">]</span>
<span class="n">ax</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">xlocs</span><span class="o">=</span><span class="n">xticks</span><span class="p">,</span> <span class="n">ylocs</span><span class="o">=</span><span class="n">yticks</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LONGITUDE_FORMATTER</span><span class="p">)</span> 
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">LATITUDE_FORMATTER</span><span class="p">)</span>
<span class="n">lambert_xticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">xticks</span><span class="p">)</span>
<span class="n">lambert_yticks</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">yticks</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">provinces</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">shp</span> <span class="o">=</span> <span class="s1">&#39;../shp_file/china_nine_dotted_line.shp&#39;</span>
<span class="n">rd</span> <span class="o">=</span> <span class="n">shapereader</span><span class="o">.</span><span class="n">Reader</span><span class="p">(</span><span class="n">shp</span><span class="p">)</span>
<span class="n">nine_dots</span> <span class="o">=</span> <span class="n">cfeat</span><span class="o">.</span><span class="n">ShapelyFeature</span><span class="p">(</span><span class="n">rd</span><span class="o">.</span><span class="n">geometries</span><span class="p">(),</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">(),</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s1">&#39;none&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">nine_dots</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="n">ax_sub</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_axes</span><span class="p">([</span><span class="mf">0.748</span><span class="p">,</span><span class="mf">0.19</span><span class="p">,</span><span class="mf">0.14</span><span class="p">,</span><span class="mf">0.155</span><span class="p">],</span> <span class="n">projection</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">115</span><span class="p">,</span> <span class="n">central_latitude</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span>
                             <span class="n">false_easting</span><span class="o">=</span><span class="mi">400000</span><span class="p">,</span> <span class="n">false_northing</span><span class="o">=</span><span class="mi">400000</span><span class="p">))</span>
<span class="n">ax_sub</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">105</span><span class="p">,</span> <span class="mi">125</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">25</span><span class="p">])</span>
<span class="n">ax_sub</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
<span class="n">ax_sub</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">nine_dots</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">)</span>
<span class="n">ax_sub</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">provinces</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/opt/miniconda3/lib/python3.7/site-packages/ipykernel_launcher.py:37: DeprecationWarning: The outline_patch property is deprecated. Use GeoAxes.spines[&#39;geo&#39;] or the default Axes properties instead.
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7fce553d3c90&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_79_2.png" src="../_images/Cartopy_1_79_2.png" />
</div>
</div>
<p>在 0.18 版本中，<code class="docutils literal notranslate"><span class="pre">gridlines</span></code> 对象进行了较大的修改，从而可以更好地进行坐标轴标记，但是也还存在一些问题。</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lambert_crs</span> <span class="o">=</span> <span class="n">ccrs</span><span class="o">.</span><span class="n">LambertConformal</span><span class="p">(</span><span class="n">central_longitude</span><span class="o">=</span><span class="mi">105</span><span class="p">)</span> 

<span class="n">ax0</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">axes</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="n">lambert_crs</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">set_extent</span><span class="p">([</span><span class="mi">75</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">54</span><span class="p">],</span> <span class="n">crs</span><span class="o">=</span><span class="n">ccrs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">LAND</span><span class="p">)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">cfeat</span><span class="o">.</span><span class="n">OCEAN</span><span class="p">)</span>
<span class="c1">#ax0.add_feature(cfeat.BORDERS)</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">provinces</span><span class="p">,</span><span class="n">linewidth</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">gl</span> <span class="o">=</span> <span class="n">ax0</span><span class="o">.</span><span class="n">gridlines</span><span class="p">(</span><span class="n">draw_labels</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">dms</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">x_inline</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">y_inline</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">gl</span><span class="o">.</span><span class="n">xlocator</span> <span class="o">=</span> <span class="n">mticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">([</span><span class="mi">80</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">])</span>
<span class="n">gl</span><span class="o">.</span><span class="n">ylocator</span> <span class="o">=</span> <span class="n">mticker</span><span class="o">.</span><span class="n">FixedLocator</span><span class="p">([</span><span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">])</span>
<span class="n">gl</span><span class="o">.</span><span class="n">rotate_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">gl</span><span class="o">.</span><span class="n">top_labels</span> <span class="o">=</span> <span class="n">gl</span><span class="o">.</span><span class="n">right_labels</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">ax0</span><span class="o">.</span><span class="n">coastlines</span><span class="p">(</span><span class="n">resolution</span><span class="o">=</span><span class="s1">&#39;10m&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;cartopy.mpl.feature_artist.FeatureArtist at 0x7fce553f1950&gt;
</pre></div>
</div>
<img alt="../_images/Cartopy_1_81_1.png" src="../_images/Cartopy_1_81_1.png" />
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./cartopy"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="../xarray/xarray-2.html" title="previous page"><code class="docutils literal notranslate"><span class="pre">Xarray</span></code> 数据处理（2）</a>
    <a class='right-next' id="next-link" href="Cartopy_2.html" title="next page"><code class="docutils literal notranslate"><span class="pre">Cartopy</span></code> 地图绘制（2）</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Xianxiang Li<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>